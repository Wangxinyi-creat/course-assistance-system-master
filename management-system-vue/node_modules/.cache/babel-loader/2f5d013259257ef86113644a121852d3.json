{"remainingRequest":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\scas\\student\\experiment\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\scas\\student\\experiment\\index.vue","mtime":1715789136149},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\babel.config.js","mtime":1715789491216},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEV4cGVyaW1lbnQgfSBmcm9tICJAL2FwaS9zY2FzL2V4cGVyaW1lbnQiOwppbXBvcnQgKiBhcyBwZGZqc0xpYiBmcm9tICdwZGZqcy1kaXN0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdleHBlcmltZW50JywKICBwcm9wczogewogICAgY291cnNlSWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAnJwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBkZkxvYWRlZDogZmFsc2UsCiAgICAgIC8vIOeUqOadpeagh+ivhiBQREYg5piv5ZCm5bey57uP5Yqg6L29CiAgICAgIHBkZkRvYzogbnVsbCwKICAgICAgLy8gUERGLmpzIOeahOaWh+aho+WvueixoQogICAgICBwYWdlTnVtOiAxLAogICAgICAvLyDlvZPliY3mmL7npLrnmoTpobXnoIEKICAgICAgc2NhbGU6IDEuNSwKICAgICAgLy8g57yp5pS+5q+U5L6LCiAgICAgIHRhYmxlRGF0YTogewogICAgICAgIGRhdGE6IFtdLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgIHBhcmFtOiB7CiAgICAgICAgICBjb3Vyc2VJZDogJycsCiAgICAgICAgICB1c2VyTmFtZTogJycsCiAgICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgICAgcGFnZVNpemU6IDEwCiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgZXhwZXJpbWVudERpYWxvZzogKCkgPT4gaW1wb3J0KCcuL2RpYWxvZy52dWUnKQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMudGFibGVEYXRhLnBhcmFtLmNvdXJzZUlkID0gdGhpcy5jb3Vyc2VJZDsKICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBwcmV2aWV3UGRmKHVybCkgewogICAgICAvLyDkvb/nlKggUERGLmpzIOWKoOi9vSBQREYg5paH5Lu2CiAgICAgIHRoaXMucGRmTG9hZGVkID0gZmFsc2U7CiAgICAgIGNvbnN0IGxvYWRpbmdUYXNrID0gcGRmanNMaWIuZ2V0RG9jdW1lbnQodXJsKTsKICAgICAgdGhpcy5wZGZEb2MgPSBhd2FpdCBsb2FkaW5nVGFzay5wcm9taXNlOwogICAgICB0aGlzLnJlbmRlclBhZ2UodGhpcy5wYWdlTnVtKTsKICAgICAgdGhpcy5wZGZMb2FkZWQgPSB0cnVlOwogICAgfSwKICAgIGFzeW5jIHJlbmRlclBhZ2UobnVtKSB7CiAgICAgIC8vIOS9v+eUqCBQREYuanMg5riy5p+T5oyH5a6a55qE6aG16Z2iCiAgICAgIHRoaXMucGFnZU51bSA9IG51bTsKICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IHRoaXMucGRmRG9jLmdldFBhZ2UobnVtKTsKICAgICAgY29uc3Qgdmlld3BvcnQgPSBwYWdlLmdldFZpZXdwb3J0KHsKICAgICAgICBzY2FsZTogdGhpcy5zY2FsZQogICAgICB9KTsKCiAgICAgIC8vIOWHhuWkhyBjYW52YXMg5LiK5LiL5paHCiAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuJHJlZnMucGRmQ2FudmFzOwogICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSB2aWV3cG9ydC5oZWlnaHQ7CiAgICAgIGNhbnZhcy53aWR0aCA9IHZpZXdwb3J0LndpZHRoOwoKICAgICAgLy8g5riy5p+TIFBERiDpobXpnaLliLAgY2FudmFzIOS4iuS4i+aWh+S4rQogICAgICBjb25zdCByZW5kZXJDb250ZXh0ID0gewogICAgICAgIGNhbnZhc0NvbnRleHQ6IGNvbnRleHQsCiAgICAgICAgdmlld3BvcnQ6IHZpZXdwb3J0CiAgICAgIH07CiAgICAgIGF3YWl0IHBhZ2UucmVuZGVyKHJlbmRlckNvbnRleHQpOwogICAgfSwKICAgIC8qKgogICAgICog6I635Y+W6I+c5Y2VCiAgICAgKi8KICAgIGdldFRhYmxlRGF0YSgpIHsKICAgICAgdGhpcy50YWJsZURhdGEubG9hZGluZyA9IHRydWU7CiAgICAgIGdldEV4cGVyaW1lbnQodGhpcy50YWJsZURhdGEucGFyYW0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnRhYmxlRGF0YS5kYXRhID0gcmVzLmRhdGEubGlzdDsKICAgICAgICB0aGlzLnRhYmxlRGF0YS50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy50YWJsZURhdGEubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0sIDUwMCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5re75Yqg5oiW5L+u5pS55by55qGGCiAgICAgKiBAcGFyYW0gZmxhZwogICAgICogQHBhcmFtIHJvdwogICAgICovCiAgICBvcGVuQWRkT3JVcGRhdGUoZmxhZywgcm93KSB7CiAgICAgIHRoaXMuJHJlZnMuZXhwZXJpbWVudERpYWxvZ1JlZi5vcGVuRGlhbG9nKGZsYWcsIHJvdyk7CiAgICB9LAogICAgLyoqCiAgICAgKiDkv67mlLnmr4/pobXmiYDlrZjmlbDmja7ph4/nmoTlgLzmiYDop6blj5HnmoTlh73mlbAKICAgICAqIEBwYXJhbSB2YWwKICAgICAqLwogICAgb25IYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICAvLyDkv67mlLnpobXnmoTlpKflsI8KICAgICAgdGhpcy50YWJsZURhdGEucGFyYW0ucGFnZVNpemUgPSB2YWw7CiAgICAgIC8vIOaMieaWsOeahHBhZ2VOb+WSjHBhZ2VTaXpl6L+b6KGM5p+l6K+iCiAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICB9LAogICAgLyoqCiAgICAgKiDkv67mlLnlvZPliY3pobXmiYDop6blj5HnmoTlh73mlbAKICAgICAqIEBwYXJhbSB2YWwKICAgICAqLwogICAgb25IYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICAvLyDmm7TmlrDlvZPliY3nmoTpobUKICAgICAgdGhpcy50YWJsZURhdGEucGFyYW0ucGFnZU51bSA9IHZhbDsKICAgICAgLy8g5oyJ5paw55qEcGFnZU5v5ZKMcGFnZVNpemXov5vooYzmn6Xor6IKICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["getExperiment","pdfjsLib","name","props","courseId","type","Number","default","data","pdfLoaded","pdfDoc","pageNum","scale","tableData","total","loading","param","userName","pageSize","components","experimentDialog","mounted","getTableData","methods","previewPdf","url","loadingTask","getDocument","promise","renderPage","num","page","getPage","viewport","getViewport","canvas","$refs","pdfCanvas","context","getContext","height","width","renderContext","canvasContext","render","then","res","list","setTimeout","openAddOrUpdate","flag","row","experimentDialogRef","openDialog","onHandleSizeChange","val","onHandleCurrentChange"],"sources":["src/views/scas/student/experiment/index.vue"],"sourcesContent":["<template>\n  <div class=\"system-user-container layout-padding\">\n    <el-card shadow=\"hover\" class=\"layout-padding-auto\">\n      <el-table :data=\"tableData.data\" v-loading=\"tableData.loading\" style=\"width: 100%;min-height:calc(100vh - 320px)\">\n<!--        <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"60\"/>-->\n<!--        <el-table-column prop=\"courseName\" label=\"课程\" align=\"center\" show-overflow-tooltip></el-table-column>-->\n<!--        <el-table-column prop=\"userName\" label=\"学号\" align=\"center\" show-overflow-tooltip></el-table-column>-->\n        <el-table-column prop=\"jobNumber\" label=\"作业号\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"experimentTitle\" label=\"作业标题\" align=\"center\"\n                         show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"experimentDescription\" label=\"作业描述\" align=\"center\"\n                         show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"answer\" label=\"总结\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"myCode\" label=\"实验代码\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"result\" label=\"代码运行结果\" align=\"center\" show-overflow-tooltip></el-table-column>\n<!--        <el-table-column prop=\"uploadUrl\" label=\"作业附件\" align=\"center\" show-overflow-tooltip>-->\n<!--          <template #default=\"scope\">-->\n<!--            <a :href=\"scope.row.uploadUrl\" target=\"_blank\" v-if=\"scope.row.uploadUrl\">查看附件</a>-->\n<!--          </template>-->\n<!--        </el-table-column>-->\n        <el-table-column prop=\"uploadUrl\" label=\"作业附件\" align=\"center\" show-overflow-tooltip>\n          <template #default=\"scope\">\n            <button @click=\"previewPdf(scope.row.uploadUrl)\" v-if=\"scope.row.uploadUrl\">查看附件</button>\n            <div v-if=\"pdfLoaded\" style=\"width: 100%; height: 600px; overflow: auto;\">\n              <canvas ref=\"pdfCanvas\"></canvas>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"deadline\" label=\"截止日期\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"uploadDate\" label=\"上传日期\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"grade\" label=\"成绩\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"review\" label=\"评阅意见\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column label=\"操作\" align=\"center\" width=\"180px\">\n          <template #default=\"scope\">\n            <el-button size=\"small\"\n                       type=\"text\"\n                       icon=\"el-icon-success\"\n                       v-if=\"!scope.row.grade\"\n                       @click=\"openAddOrUpdate('edit', scope.row)\"\n            >提交\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-pagination\n          @size-change=\"onHandleSizeChange\"\n          @current-change=\"onHandleCurrentChange\"\n          class=\"mt15\"\n          :pager-count=\"5\"\n          :page-sizes=\"[10, 20, 30]\"\n          v-model:current-page=\"tableData.param.pageNum\"\n          background\n          v-model:page-size=\"tableData.param.pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"tableData.total\"\n      >\n      </el-pagination>\n    </el-card>\n\n    <experimentDialog ref=\"experimentDialogRef\" @refresh=\"getTableData()\"/>\n  </div>\n</template>\n\n<script>\nimport {getExperiment} from \"@/api/scas/experiment\";\nimport * as pdfjsLib from 'pdfjs-dist';\n\nexport default {\n  name: 'experiment',\n  props: {\n    courseId: {\n      type: Number,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      pdfLoaded: false, // 用来标识 PDF 是否已经加载\n      pdfDoc: null, // PDF.js 的文档对象\n      pageNum: 1, // 当前显示的页码\n      scale: 1.5, // 缩放比例\n      tableData: {\n        data: [],\n        total: 0,\n        loading: false,\n        param: {\n          courseId: '',\n          userName: '',\n          pageNum: 1,\n          pageSize: 10,\n        },\n      }\n    };\n  },\n  components: {\n    experimentDialog: () => import('./dialog.vue'),\n  },\n  mounted() {\n    this.tableData.param.courseId = this.courseId\n    this.getTableData();\n  },\n  methods: {\n    async previewPdf(url) {\n      // 使用 PDF.js 加载 PDF 文件\n      this.pdfLoaded = false;\n      const loadingTask = pdfjsLib.getDocument(url);\n      this.pdfDoc = await loadingTask.promise;\n      this.renderPage(this.pageNum);\n      this.pdfLoaded = true;\n    },\n    async renderPage(num) {\n      // 使用 PDF.js 渲染指定的页面\n      this.pageNum = num;\n      const page = await this.pdfDoc.getPage(num);\n      const viewport = page.getViewport({ scale: this.scale });\n\n      // 准备 canvas 上下文\n      const canvas = this.$refs.pdfCanvas;\n      const context = canvas.getContext('2d');\n      canvas.height = viewport.height;\n      canvas.width = viewport.width;\n\n      // 渲染 PDF 页面到 canvas 上下文中\n      const renderContext = {\n        canvasContext: context,\n        viewport: viewport,\n      };\n      await page.render(renderContext);\n    },\n    /**\n     * 获取菜单\n     */\n    getTableData() {\n      this.tableData.loading = true;\n      getExperiment(this.tableData.param).then(res => {\n        this.tableData.data = res.data.list;\n        this.tableData.total = res.data.total;\n        setTimeout(() => {\n          this.tableData.loading = false;\n        }, 500);\n      })\n    },\n    /**\n     * 添加或修改弹框\n     * @param flag\n     * @param row\n     */\n    openAddOrUpdate(flag, row) {\n      this.$refs.experimentDialogRef.openDialog(flag, row)\n    },\n    /**\n     * 修改每页所存数据量的值所触发的函数\n     * @param val\n     */\n    onHandleSizeChange(val) {\n      // 修改页的大小\n      this.tableData.param.pageSize = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n    /**\n     * 修改当前页所触发的函数\n     * @param val\n     */\n    onHandleCurrentChange(val) {\n      // 更新当前的页\n      this.tableData.param.pageNum = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n  },\n};\n</script>\n\n<style>\n.el-tooltip__popper {\n  max-width: 50%\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA,SAAAA,aAAA;AACA,YAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACAC,QAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,SAAA;MAAA;MACAC,MAAA;MAAA;MACAC,OAAA;MAAA;MACAC,KAAA;MAAA;MACAC,SAAA;QACAL,IAAA;QACAM,KAAA;QACAC,OAAA;QACAC,KAAA;UACAZ,QAAA;UACAa,QAAA;UACAN,OAAA;UACAO,QAAA;QACA;MACA;IACA;EACA;EACAC,UAAA;IACAC,gBAAA,EAAAA,CAAA;EACA;EACAC,QAAA;IACA,KAAAR,SAAA,CAAAG,KAAA,CAAAZ,QAAA,QAAAA,QAAA;IACA,KAAAkB,YAAA;EACA;EACAC,OAAA;IACA,MAAAC,WAAAC,GAAA;MACA;MACA,KAAAhB,SAAA;MACA,MAAAiB,WAAA,GAAAzB,QAAA,CAAA0B,WAAA,CAAAF,GAAA;MACA,KAAAf,MAAA,SAAAgB,WAAA,CAAAE,OAAA;MACA,KAAAC,UAAA,MAAAlB,OAAA;MACA,KAAAF,SAAA;IACA;IACA,MAAAoB,WAAAC,GAAA;MACA;MACA,KAAAnB,OAAA,GAAAmB,GAAA;MACA,MAAAC,IAAA,cAAArB,MAAA,CAAAsB,OAAA,CAAAF,GAAA;MACA,MAAAG,QAAA,GAAAF,IAAA,CAAAG,WAAA;QAAAtB,KAAA,OAAAA;MAAA;;MAEA;MACA,MAAAuB,MAAA,QAAAC,KAAA,CAAAC,SAAA;MACA,MAAAC,OAAA,GAAAH,MAAA,CAAAI,UAAA;MACAJ,MAAA,CAAAK,MAAA,GAAAP,QAAA,CAAAO,MAAA;MACAL,MAAA,CAAAM,KAAA,GAAAR,QAAA,CAAAQ,KAAA;;MAEA;MACA,MAAAC,aAAA;QACAC,aAAA,EAAAL,OAAA;QACAL,QAAA,EAAAA;MACA;MACA,MAAAF,IAAA,CAAAa,MAAA,CAAAF,aAAA;IACA;IACA;AACA;AACA;IACApB,aAAA;MACA,KAAAT,SAAA,CAAAE,OAAA;MACAf,aAAA,MAAAa,SAAA,CAAAG,KAAA,EAAA6B,IAAA,CAAAC,GAAA;QACA,KAAAjC,SAAA,CAAAL,IAAA,GAAAsC,GAAA,CAAAtC,IAAA,CAAAuC,IAAA;QACA,KAAAlC,SAAA,CAAAC,KAAA,GAAAgC,GAAA,CAAAtC,IAAA,CAAAM,KAAA;QACAkC,UAAA;UACA,KAAAnC,SAAA,CAAAE,OAAA;QACA;MACA;IACA;IACA;AACA;AACA;AACA;AACA;IACAkC,gBAAAC,IAAA,EAAAC,GAAA;MACA,KAAAf,KAAA,CAAAgB,mBAAA,CAAAC,UAAA,CAAAH,IAAA,EAAAC,GAAA;IACA;IACA;AACA;AACA;AACA;IACAG,mBAAAC,GAAA;MACA;MACA,KAAA1C,SAAA,CAAAG,KAAA,CAAAE,QAAA,GAAAqC,GAAA;MACA;MACA,KAAAjC,YAAA;IACA;IACA;AACA;AACA;AACA;IACAkC,sBAAAD,GAAA;MACA;MACA,KAAA1C,SAAA,CAAAG,KAAA,CAAAL,OAAA,GAAA4C,GAAA;MACA;MACA,KAAAjC,YAAA;IACA;EACA;AACA"}]}