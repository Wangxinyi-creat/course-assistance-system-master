{"remainingRequest":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\system\\role\\empower.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\system\\role\\empower.vue","mtime":1713709431000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\babel.config.js","mtime":1715789491216},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgeyBNZXNzYWdlLCBNZXNzYWdlQm94IH0gZnJvbSAiZWxlbWVudC11aSI7CmltcG9ydCB7IGNhbmNlbFVzZXJSb2xlLCBkZWxldGVVc2VyLCBnZXRVc2VyQnlSb2xlSWQgfSBmcm9tICJAL2FwaS9zeXN0ZW0vdXNlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZW1wb3dlcicsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogewogICAgICAgIGRhdGE6IFtdLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgIHBhcmFtOiB7CiAgICAgICAgICB1c2VyTmFtZTogJycsCiAgICAgICAgICByb2xlSWQ6ICcnLAogICAgICAgICAgcGFnZU51bTogMSwKICAgICAgICAgIHBhZ2VTaXplOiAxMAogICAgICAgIH0KICAgICAgfSwKICAgICAgdXNlck5hbWVMaXN0OiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnRhYmxlRGF0YS5wYXJhbS5yb2xlSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIOiOt+WPluiPnOWNlQogICAgICovCiAgICBnZXRUYWJsZURhdGEoKSB7CiAgICAgIHRoaXMudGFibGVEYXRhLmxvYWRpbmcgPSB0cnVlOwogICAgICBnZXRVc2VyQnlSb2xlSWQodGhpcy50YWJsZURhdGEucGFyYW0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnRhYmxlRGF0YS5kYXRhID0gcmVzLmRhdGEubGlzdDsKICAgICAgICB0aGlzLnRhYmxlRGF0YS50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy50YWJsZURhdGEubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0sIDUwMCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5p+l6K+iCiAgICAgKi8KICAgIHNlYXJjaCgpIHsKICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgIH0sCiAgICAvKioKICAgICAqIOWPlua2iOaOiOadgwogICAgICovCiAgICByZXZva2UoKSB7CiAgICAgIGlmICghdGhpcy51c2VyTmFtZUxpc3QubGVuZ3RoID4gMCkgewogICAgICAgIE1lc3NhZ2UuaW5mbygi6K+36YCJ5oup6KaB5Y+W5raI5o6I5p2D55qE55So5oi3Iik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNhbmNlbFVzZXJSb2xlKHRoaXMudXNlck5hbWVMaXN0KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgICAgICBNZXNzYWdlLnN1Y2Nlc3MocmVzLm1lc3NhZ2UpOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOWIoOmZpOeUqOaItwogICAgICogQHBhcmFtIHJvdwogICAgICovCiAgICBvblJvd0RlbChyb3cpIHsKICAgICAgLy/mj5DnpLoKICAgICAgTWVzc2FnZUJveC5jb25maXJtKGDmraTmk43kvZzlsIblj5bmtojotKbmiLflkI3np7DvvJrigJwke3Jvdy51c2VyTmFtZX3igJ3nmoTmnYPpmZDvvIzmmK/lkKbnu6fnu60/YCwgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruiupCcsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIC8v6LCD55So5Yig6Zmk5pa55rOVCiAgICAgICAgY29uc3QgaWRzID0gW107CiAgICAgICAgaWRzLnB1c2gocm93LnVzZXJOYW1lKTsKICAgICAgICBjYW5jZWxVc2VyUm9sZShpZHMpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICAgICAgICBNZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaCgoKSA9PiB7fSk7CiAgICB9LAogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnVzZXJOYW1lTGlzdCA9IFtdOwogICAgICB2YWwuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICB0aGlzLnVzZXJOYW1lTGlzdC5wdXNoKGl0ZW0udXNlck5hbWUpOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOS/ruaUueavj+mhteaJgOWtmOaVsOaNrumHj+eahOWAvOaJgOinpuWPkeeahOWHveaVsAogICAgICogQHBhcmFtIHZhbAogICAgICovCiAgICBvbkhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIC8vIOS/ruaUuemhteeahOWkp+WwjwogICAgICB0aGlzLnRhYmxlRGF0YS5wYXJhbS5wYWdlU2l6ZSA9IHZhbDsKICAgICAgLy8g5oyJ5paw55qEcGFnZU5v5ZKMcGFnZVNpemXov5vooYzmn6Xor6IKICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgIH0sCiAgICAvKioKICAgICAqIOS/ruaUueW9k+WJjemhteaJgOinpuWPkeeahOWHveaVsAogICAgICogQHBhcmFtIHZhbAogICAgICovCiAgICBvbkhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIC8vIOabtOaWsOW9k+WJjeeahOmhtQogICAgICB0aGlzLnRhYmxlRGF0YS5wYXJhbS5wYWdlTnVtID0gdmFsOwogICAgICAvLyDmjInmlrDnmoRwYWdlTm/lkoxwYWdlU2l6Zei/m+ihjOafpeivogogICAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["Message","MessageBox","cancelUserRole","deleteUser","getUserByRoleId","name","data","tableData","total","loading","param","userName","roleId","pageNum","pageSize","userNameList","mounted","$route","query","id","getTableData","methods","then","res","list","setTimeout","search","revoke","length","info","success","message","onRowDel","row","confirm","confirmButtonText","cancelButtonText","type","ids","push","catch","handleSelectionChange","val","forEach","item","onHandleSizeChange","onHandleCurrentChange"],"sources":["src/views/system/role/empower.vue"],"sourcesContent":["<template>\n  <div class=\"system-user-container layout-padding\">\n    <el-card shadow=\"hover\" class=\"layout-padding-auto\">\n      <div class=\"system-user-search mb15\">\n        <el-form :model=\"tableData.param\" ref=\"queryForm\" size=\"small\" :inline=\"true\">\n          <el-form-item prop=\"userName\">\n            <el-input size=\"medium\" v-model=\"tableData.param.userName\" placeholder=\"请输入账号名称\"\n                      style=\"max-width: 180px\" clearable></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button size=\"medium\" type=\"primary\" class=\"ml10\" icon=\"el-icon-search\" @click=\"search()\">\n              查询\n            </el-button>\n            <el-button size=\"medium\" type=\"danger\" class=\"ml10\" icon=\"el-icon-circle-close\"\n                       @click=\"revoke()\">\n              取消授权\n            </el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n\n      <el-table :data=\"tableData.data\" @selection-change=\"handleSelectionChange\" v-loading=\"tableData.loading\"\n                style=\"width: 100%;min-height:calc(100vh - 320px)\">\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n        <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"60\"/>\n        <el-table-column prop=\"userName\" label=\"账户名称\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"nickName\" label=\"用户昵称\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"sex\" label=\"性别\" align=\"center\" show-overflow-tooltip>\n          <template #default=\"scope\">\n            <span>{{ scope.row.sex == 1 ? '男' : '女' }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"phone\" label=\"手机号\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"email\" label=\"邮箱\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"status\" label=\"用户状态\" align=\"center\" show-overflow-tooltip>\n          <template #default=\"scope\">\n            <el-tag v-if=\"scope.row.status\" type=\"success\">启用</el-tag>\n            <el-tag v-else type=\"danger\">停用</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"createBy\" label=\"创建人\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"createTime\" label=\"创建时间\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"updateBy\" label=\"修改人\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"updateTime\" label=\"修改时间\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column label=\"操作\" align=\"center\" width=\"150px\">\n          <template #default=\"scope\">\n            <el-button size=\"small\"\n                       type=\"text\"\n                       icon=\"el-icon-circle-close\"\n                       @click=\"onRowDel(scope.row)\">取消授权\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-pagination\n        @size-change=\"onHandleSizeChange\"\n        @current-change=\"onHandleCurrentChange\"\n        class=\"mt15\"\n        :pager-count=\"5\"\n        :page-sizes=\"[10, 20, 30]\"\n        v-model:current-page=\"tableData.param.pageNum\"\n        background\n        v-model:page-size=\"tableData.param.pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"tableData.total\"\n      >\n      </el-pagination>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport {Message, MessageBox} from \"element-ui\";\nimport {cancelUserRole, deleteUser, getUserByRoleId} from \"@/api/system/user\";\n\nexport default {\n  name: 'empower',\n  data() {\n    return {\n      tableData: {\n        data: [],\n        total: 0,\n        loading: false,\n        param: {\n          userName: '',\n          roleId: '',\n          pageNum: 1,\n          pageSize: 10,\n        }\n      },\n      userNameList: []\n    };\n  },\n  mounted() {\n    this.tableData.param.roleId = this.$route.query.id\n    this.getTableData();\n  },\n  methods: {\n    /**\n     * 获取菜单\n     */\n    getTableData() {\n      this.tableData.loading = true;\n      getUserByRoleId(this.tableData.param).then(res => {\n        this.tableData.data = res.data.list;\n        this.tableData.total = res.data.total;\n        setTimeout(() => {\n          this.tableData.loading = false;\n        }, 500);\n      })\n    },\n    /**\n     * 查询\n     */\n    search() {\n      this.getTableData();\n    },\n    /**\n     * 取消授权\n     */\n    revoke() {\n      if (!this.userNameList.length > 0) {\n        Message.info(\"请选择要取消授权的用户\")\n        return\n      }\n      cancelUserRole(this.userNameList).then(res => {\n        this.getTableData();\n        Message.success(res.message);\n      })\n    },\n    /**\n     * 删除用户\n     * @param row\n     */\n    onRowDel(row) {\n      //提示\n      MessageBox.confirm(`此操作将取消账户名称：“${row.userName}”的权限，是否继续?`, '提示', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(() => {\n        //调用删除方法\n        const ids = []\n        ids.push(row.userName)\n        cancelUserRole(ids).then(res => {\n          this.getTableData();\n          Message.success(\"删除成功\");\n        })\n      }).catch(() => {\n      });\n    },\n    handleSelectionChange(val) {\n      this.userNameList = []\n      val.forEach(item => {\n        this.userNameList.push(item.userName)\n      })\n    },\n    /**\n     * 修改每页所存数据量的值所触发的函数\n     * @param val\n     */\n    onHandleSizeChange(val) {\n      // 修改页的大小\n      this.tableData.param.pageSize = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n    /**\n     * 修改当前页所触发的函数\n     * @param val\n     */\n    onHandleCurrentChange(val) {\n      // 更新当前的页\n      this.tableData.param.pageNum = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n  }\n};\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA,SAAAA,OAAA,EAAAC,UAAA;AACA,SAAAC,cAAA,EAAAC,UAAA,EAAAC,eAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;QACAD,IAAA;QACAE,KAAA;QACAC,OAAA;QACAC,KAAA;UACAC,QAAA;UACAC,MAAA;UACAC,OAAA;UACAC,QAAA;QACA;MACA;MACAC,YAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAT,SAAA,CAAAG,KAAA,CAAAE,MAAA,QAAAK,MAAA,CAAAC,KAAA,CAAAC,EAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACA;AACA;AACA;IACAD,aAAA;MACA,KAAAb,SAAA,CAAAE,OAAA;MACAL,eAAA,MAAAG,SAAA,CAAAG,KAAA,EAAAY,IAAA,CAAAC,GAAA;QACA,KAAAhB,SAAA,CAAAD,IAAA,GAAAiB,GAAA,CAAAjB,IAAA,CAAAkB,IAAA;QACA,KAAAjB,SAAA,CAAAC,KAAA,GAAAe,GAAA,CAAAjB,IAAA,CAAAE,KAAA;QACAiB,UAAA;UACA,KAAAlB,SAAA,CAAAE,OAAA;QACA;MACA;IACA;IACA;AACA;AACA;IACAiB,OAAA;MACA,KAAAN,YAAA;IACA;IACA;AACA;AACA;IACAO,OAAA;MACA,UAAAZ,YAAA,CAAAa,MAAA;QACA5B,OAAA,CAAA6B,IAAA;QACA;MACA;MACA3B,cAAA,MAAAa,YAAA,EAAAO,IAAA,CAAAC,GAAA;QACA,KAAAH,YAAA;QACApB,OAAA,CAAA8B,OAAA,CAAAP,GAAA,CAAAQ,OAAA;MACA;IACA;IACA;AACA;AACA;AACA;IACAC,SAAAC,GAAA;MACA;MACAhC,UAAA,CAAAiC,OAAA,gBAAAD,GAAA,CAAAtB,QAAA;QACAwB,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAf,IAAA;QACA;QACA,MAAAgB,GAAA;QACAA,GAAA,CAAAC,IAAA,CAAAN,GAAA,CAAAtB,QAAA;QACAT,cAAA,CAAAoC,GAAA,EAAAhB,IAAA,CAAAC,GAAA;UACA,KAAAH,YAAA;UACApB,OAAA,CAAA8B,OAAA;QACA;MACA,GAAAU,KAAA,QACA;IACA;IACAC,sBAAAC,GAAA;MACA,KAAA3B,YAAA;MACA2B,GAAA,CAAAC,OAAA,CAAAC,IAAA;QACA,KAAA7B,YAAA,CAAAwB,IAAA,CAAAK,IAAA,CAAAjC,QAAA;MACA;IACA;IACA;AACA;AACA;AACA;IACAkC,mBAAAH,GAAA;MACA;MACA,KAAAnC,SAAA,CAAAG,KAAA,CAAAI,QAAA,GAAA4B,GAAA;MACA;MACA,KAAAtB,YAAA;IACA;IACA;AACA;AACA;AACA;IACA0B,sBAAAJ,GAAA;MACA;MACA,KAAAnC,SAAA,CAAAG,KAAA,CAAAG,OAAA,GAAA6B,GAAA;MACA;MACA,KAAAtB,YAAA;IACA;EACA;AACA"}]}