{"remainingRequest":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\personal\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\personal\\index.vue","mtime":1713709431000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\babel.config.js","mtime":1715789491216},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgU2Nyb2xsIGZyb20gJ3Z1ZS1zZWFtbGVzcy1zY3JvbGwnOwppbXBvcnQgeyBTZXNzaW9uIH0gZnJvbSAnQC91dGlscy9zdG9yYWdlJzsKaW1wb3J0IHsgZm9ybWF0QXhpcywgZm9ybWF0RGF0ZSB9IGZyb20gJ0AvdXRpbHMvc3R5bGUvZm9ybWF0VGltZSc7CmltcG9ydCB7IGRhaWx5TWVzc2FnZSB9IGZyb20gJy4vbW9jayc7CmltcG9ydCB7IHVwZGF0ZVBlcnNvbmFsLCB1cGRhdGVQd2QgfSBmcm9tICJAL2FwaS9zeXN0ZW0vdXNlciI7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICJlbGVtZW50LXVpIjsKaW1wb3J0IHsgZ2V0Tm90aWNlIH0gZnJvbSAiQC9hcGkvc3lzdGVtL25vdGljZSI7CmltcG9ydCB7IENoZWNrTm90aWNlUm91dGVyIH0gZnJvbSAiQC91dGlscy9hZGRSb3V0ZXIiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3BlcnNvbmFsJywKICBjb21wb25lbnRzOiB7CiAgICBTY3JvbGwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVVQTE9BRCwKICAgICAgbmV3c0luZm9MaXN0OiBbXSwKICAgICAgdXNlckluZm86IHt9LAogICAgICBkYWlseU1lc3NhZ2U6IHt9LAogICAgICByZXBsYWNlRmxhZzogZmFsc2UsCiAgICAgIHBlcnNvbmFsRm9ybToge30sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBtb2RpZnlQd2RGb3JtOiB7fSwKICAgICAgSVA6ICcnLAogICAgICBydWxlczogewogICAgICAgIG9sZFBhc3N3b3JkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5pen5a+G56CBJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIG5ld1Bhc3N3b3JkMTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaWsOWvhueggScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBuZXdQYXNzd29yZDI6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnoa7orqTmlrDlr4bnoIEnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnBlcnNvbmFsRm9ybSA9IHsKICAgICAgLi4udGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm9zLnVzZXJJbmZvcy51c2VyCiAgICB9OwogICAgdGhpcy5nZXROb3RpY2UoKTsgLy8g6I635Y+W5raI5oGv6YCa55+lCiAgICB0aGlzLmluaXRVc2VySW5mbygpOyAvLyDliJ3lp4vljJbnmbvlvZXkv6Hmga8KICAgIHRoaXMuaW5pdERhaWx5TWVzc2FnZSgpOyAvLyDpmo/mnLror63lvZUKICAgIC8v6I635Y+WaXAKICAgIGF4aW9zLmdldCgnaHR0cDovL2FwaS5pcGlmeS5vcmc/Zm9ybWF0PWpzb24nKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgdGhpcy5JUCA9IHJlc3BvbnNlLmRhdGEuaXA7CiAgICB9KTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjdXJyZW50VGltZSgpIHsKICAgICAgcmV0dXJuIGZvcm1hdEF4aXMobmV3IERhdGUoKSk7CiAgICB9LAogICAgb3B0aW9uU2luZ2xlSGVpZ2h0KCkgewogICAgICByZXR1cm4gewogICAgICAgIHNpbmdsZUhlaWdodDogMjgsCiAgICAgICAgbGltaXRNb3ZlTnVtOiA4LAogICAgICAgIHdhaXRUaW1lOiAyMDAwCiAgICAgIH07CiAgICB9LAogICAgZ2V0VXNlckluZm9zKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm9zLnVzZXJJbmZvcy51c2VyOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g6ZqP5py66K+t5b2VCiAgICBpbml0RGFpbHlNZXNzYWdlKCkgewogICAgICB0aGlzLmRhaWx5TWVzc2FnZSA9IGRhaWx5TWVzc2FnZVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkYWlseU1lc3NhZ2UubGVuZ3RoKV07CiAgICB9LAogICAgLy8g5Yid5aeL5YyW55m75b2V5L+h5oGvCiAgICBpbml0VXNlckluZm8oKSB7CiAgICAgIGlmICghU2Vzc2lvbi5nZXQoJ3VzZXJJbmZvJykpIHJldHVybiBmYWxzZTsKICAgICAgdGhpcy51c2VySW5mbyA9IFNlc3Npb24uZ2V0KCd1c2VySW5mbycpOwogICAgICB0aGlzLnVzZXJJbmZvLnRpbWUgPSBmb3JtYXREYXRlKG5ldyBEYXRlKHRoaXMudXNlckluZm8udGltZSksICdZWVlZLW1tLWRkIEhIOk1NOlNTJyk7CiAgICB9LAogICAgcmVwbGFjZSgpIHsKICAgICAgdGhpcy5yZXBsYWNlRmxhZyA9ICF0aGlzLnJlcGxhY2VGbGFnOwogICAgICB0aGlzLnBlcnNvbmFsRm9ybSA9IHsKICAgICAgICAuLi50aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mb3MudXNlckluZm9zLnVzZXIKICAgICAgfTsKICAgIH0sCiAgICBnZXROb3RpY2UoKSB7CiAgICAgIGNvbnN0IHBhcmFtID0gewogICAgICAgIHN0YXR1czogMSwKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMAogICAgICB9OwogICAgICBnZXROb3RpY2UocGFyYW0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLm5ld3NJbmZvTGlzdCA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5o+Q5Lqk5Liq5Lq65L+h5oGv5L+u5pS5CiAgICAgKi8KICAgIHJlcGxhY2VTYXZlKCkgewogICAgICB1cGRhdGVQZXJzb25hbCh0aGlzLnBlcnNvbmFsRm9ybSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAvL+abtOaWsHZ1ZXjmlbDmja4KICAgICAgICAgIHRoaXMubG9hZFZ1ZVgoKTsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICfmj5DnpLonLAogICAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5yZXBsYWNlRmxhZyA9IGZhbHNlOwogICAgfSwKICAgIC8qKgogICAgICog5pu05pawdnVleOaVsOaNrgogICAgICovCiAgICBsb2FkVnVlWCgpIHsKICAgICAgY29uc3QgdXNlckluZm9zID0gewogICAgICAgIHVzZXI6IHRoaXMucGVyc29uYWxGb3JtLAogICAgICAgIHRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgIGF1dGhCdG5MaXN0OiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mb3MudXNlckluZm9zLmF1dGhCdG5MaXN0CiAgICAgIH07CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VySW5mb3Mvc2V0VXNlckluZm9zJywgdXNlckluZm9zKTsKICAgICAgU2Vzc2lvbi5zZXQoJ3VzZXJJbmZvJywgdXNlckluZm9zKTsKICAgIH0sCiAgICAvKioKICAgICAqIOWbvueJh+S4iuS8oOaIkOWKn+WbnuiwgwogICAgICogQHBhcmFtIHJlcwogICAgICogQHBhcmFtIGZpbGUKICAgICAqLwogICAgaGFuZGxlQXZhdGFyU3VjY2VzcyhyZXMsIGZpbGUpIHsKICAgICAgdGhpcy5wZXJzb25hbEZvcm0uaGVhZFNyYyA9IHJlcy5kYXRhOwogICAgICB0aGlzLnJlcGxhY2VTYXZlKCk7CiAgICB9LAogICAgLyoqCiAgICAgKiDlm77niYfkuIrkvKDliY3osIPnlKgKICAgICAqIEBwYXJhbSBmaWxlCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0KICAgICAqLwogICAgYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsKICAgICAgY29uc3QgaXNQTkcgPSBmaWxlLnR5cGUgPT09ICdpbWFnZS9wbmcnOwogICAgICBjb25zdCBpc0pQRyA9IGZpbGUudHlwZSA9PT0gJ2ltYWdlL2pwZWcnOwogICAgICBjb25zdCBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7CiAgICAgIGlmICghaXNKUEcgJiYgIWlzUE5HKSB7CiAgICAgICAgTWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5Y+q6IO95pivIEpQRyDmiJYgUE5HIOagvOW8jyEnKTsKICAgICAgfQogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIE1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWktOWDj+WbvueJh+Wkp+Wwj+S4jeiDvei2hei/hyAyTUIhJyk7CiAgICAgIH0KICAgICAgY29uc3QgaXNJTUcgPSBpc0pQRyB8fCBpc1BORzsKICAgICAgcmV0dXJuIGlzSU1HICYmIGlzTHQyTTsKICAgIH0sCiAgICBvblN1Ym1pdCgpIHsKICAgICAgdXBkYXRlUHdkKHRoaXMuZ2V0VXNlckluZm9zLmlkLCB0aGlzLm1vZGlmeVB3ZEZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgICB0aXRsZTogJ+aPkOekuicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnmiJDlip8nCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5raI5oGv6YCa55+l5b2T5YmN6aG554K55Ye7CiAgICBvbk5ld3NJbmZvTGlzdENsaWNrKHYpIHsKICAgICAgQ2hlY2tOb3RpY2VSb3V0ZXIoKTsgLy/mn6Xor6LlhazlkYror6bmg4Xot6/nlLEKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdjaGVja05vdGljZScsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGlkOiB2Lm5vdGljZUlkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDot7PovazliLDpgJrnn6XlhazlkYoKICAgIG9uT3Blbk5vdGljZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9ub3RpY2UnKTsKICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuJHJlZnMudXNlckRpYWxvZ0Zvcm1SZWYucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy5tb2RpZnlQd2RGb3JtID0ge307CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Scroll","Session","formatAxis","formatDate","dailyMessage","updatePersonal","updatePwd","Message","getNotice","CheckNoticeRouter","axios","name","components","data","baseURL","process","env","VUE_APP_APIUPLOAD","newsInfoList","userInfo","replaceFlag","personalForm","dialogVisible","modifyPwdForm","IP","rules","oldPassword","required","message","trigger","newPassword1","newPassword2","created","$store","state","userInfos","user","initUserInfo","initDailyMessage","get","then","response","ip","computed","currentTime","Date","optionSingleHeight","singleHeight","limitMoveNum","waitTime","getUserInfos","methods","Math","floor","random","length","time","replace","param","status","pageNum","pageSize","res","list","replaceSave","code","loadVueX","$notify","success","title","getTime","authBtnList","dispatch","set","handleAvatarSuccess","file","headSrc","beforeAvatarUpload","isPNG","type","isJPG","isLt2M","size","error","isIMG","onSubmit","id","onNewsInfoListClick","v","$router","push","query","noticeId","onOpenNotice","reset","$refs","userDialogFormRef","resetFields"],"sources":["src/views/personal/index.vue"],"sourcesContent":["<template>\n  <div class=\"personal\">\n    <!-- 用户信息 -->\n    <el-row :gutter=\"15\">\n      <el-col :md=\"24\" :lg=\"16\" :xl=\"16\" class=\"mb15\">\n        <el-card shadow=\"hover\">\n          <div slot=\"header\">\n            <span>我的工作台</span>\n          </div>\n          <div class=\"user-item\">\n            <div class=\"user-item-left\">\n              <el-upload class=\"h100 personal-user-left-upload\"\n                         :action=\"baseURL\"\n                         :show-file-list=\"false\"\n                         :on-success=\"handleAvatarSuccess\"\n                         :before-upload=\"beforeAvatarUpload\">\n                <img :src=\"getUserInfos.headSrc\"/>\n              </el-upload>\n            </div>\n            <div class=\"user-item-right overflow\">\n              <el-row>\n                <el-col :span=\"24\" class=\"right-title mb15 one-text-overflow\"\n                >{{ currentTime }}，{{ getUserInfos.userName }}，{{ dailyMessage }}\n                </el-col>\n                <el-col :span=\"24\">\n                  <el-col :xs=\"12\" :sm=\"12\" :md=\"8\" class=\"right-l-v\">\n                    <div class=\"right-label\">昵称：</div>\n                    <div class=\"right-value\">{{ getUserInfos.nickName }}</div>\n                  </el-col>\n                  <el-col :xs=\"12\" :sm=\"12\" :md=\"16\" class=\"right-l-v\">\n                    <div class=\"right-label\">身份：</div>\n                    <div class=\"right-value\">\n                      {{ getUserInfos.identity }}\n                    </div>\n                  </el-col>\n                </el-col>\n                <el-col :span=\"24\" class=\"mt5\" v-if=\"getUserInfos.identity === '学生'\">\n                  <el-col :xs=\"12\" :sm=\"12\" :md=\"8\" class=\"right-l-v\">\n                    <div class=\"right-label one-text-overflow\">专业：</div>\n                    <div class=\"right-value one-text-overflow\">{{ getUserInfos.major }}</div>\n                  </el-col>\n                  <el-col :xs=\"12\" :sm=\"12\" :md=\"16\" class=\"right-l-v\">\n                    <div class=\"right-label one-text-overflow\">班级：</div>\n                    <div class=\"right-value one-text-overflow\">{{ getUserInfos.major }}</div>\n                  </el-col>\n                </el-col>\n                <el-col :span=\"24\" class=\"mt5\">\n                  <el-col :xs=\"12\" :sm=\"12\" :md=\"8\" class=\"right-l-v\">\n                    <div class=\"right-label one-text-overflow\">IP：</div>\n                    <div class=\"right-value one-text-overflow\">{{ IP }}</div>\n                  </el-col>\n                  <el-col :xs=\"12\" :sm=\"12\" :md=\"16\" class=\"right-l-v\">\n                    <div class=\"right-label one-text-overflow\">时间：</div>\n                    <div class=\"right-value one-text-overflow\">{{ userInfo.time }}</div>\n                  </el-col>\n                </el-col>\n              </el-row>\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n      <!--消息通知-->\n      <el-col :md=\"24\" :lg=\"8\" :xl=\"8\" class=\"mb15\">\n        <el-card shadow=\"hover\">\n          <div slot=\"header\">\n            <span>消息通知</span>\n            <el-button class=\"personal-card-more\" type=\"text\" v-if=\"newsInfoList.length>0\"\n                       @click=\"onOpenNotice\">更多\n            </el-button>\n          </div>\n          <div class=\"info\">\n            <Scroll :data=\"newsInfoList\" class=\"info-scroll\" :class-option=\"optionSingleHeight\">\n              <ul class=\"info-ul\" v-if=\"newsInfoList.length>0\">\n                <li v-for=\"(v, k) in newsInfoList\" :key=\"k\" class=\"info-item\"\n                    @click=\"onNewsInfoListClick(v)\">\n                  <div class=\"info-item-left\"\n                       v-text=\"(v.noticeType===1?'[通知]':'[公告]')+v.noticeTitle\"></div>\n                  <div class=\"info-item-right\" v-text=\"v.createTime\"></div>\n                </li>\n              </ul>\n              <el-empty description=\"暂无消息通知\" v-else :image-size=\"50\"></el-empty>\n            </Scroll>\n          </div>\n        </el-card>\n      </el-col>\n      <!-- 更新信息 -->\n      <el-col :span=\"24\">\n        <el-card shadow=\"hover\" class=\"personal-edit\" header=\"更新信息\">\n          <div class=\"personal-edit-title\">\n            <span>基本信息</span>\n            <el-button class=\"personal-card-more\" type=\"text\" @click=\"replace()\" v-if=\"!replaceFlag\">\n              更新个人信息\n            </el-button>\n            <el-button class=\"personal-card-more\" type=\"text\" @click=\"replace()\" v-else>取 消</el-button>\n          </div>\n          <el-form :model=\"personalForm\" size=\"small\" label-width=\"40px\" class=\"mt35 mb35\"\n                   :disabled='!replaceFlag'>\n            <el-row :gutter=\"35\">\n              <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\" :xl=\"4\">\n                <el-form-item label=\"昵称\">\n                  <el-input v-model=\"personalForm.nickName\" placeholder=\"请输入昵称\"\n                            clearable></el-input>\n                </el-form-item>\n              </el-col>\n              <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\" :xl=\"4\">\n                <el-form-item label=\"邮箱\">\n                  <el-input v-model=\"personalForm.email\" placeholder=\"请输入邮箱\"\n                            clearable></el-input>\n                </el-form-item>\n              </el-col>\n              <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\" :xl=\"4\">\n                <el-form-item label=\"手机\">\n                  <el-input v-model=\"personalForm.phone\" placeholder=\"请输入手机\"\n                            clearable></el-input>\n                </el-form-item>\n              </el-col>\n              <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\" :xl=\"4\">\n                <el-form-item label=\"性别\">\n                  <el-select v-model=\"personalForm.sex\" placeholder=\"请选择性别\" clearable\n                             class=\"w100\">\n                    <el-option label=\"男\" :value=\"1\"></el-option>\n                    <el-option label=\"女\" :value=\"2\"></el-option>\n                  </el-select>\n                </el-form-item>\n              </el-col>\n              <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\" :xl=\"4\" v-if=\"replaceFlag\">\n                <el-form-item>\n                  <el-button type=\"primary\" icon=\"el-icon-edit\" @click=\"replaceSave\">提交更新\n                  </el-button>\n                </el-form-item>\n              </el-col>\n            </el-row>\n          </el-form>\n          <div class=\"personal-edit-title\">账号安全</div>\n          <div class=\"personal-edit-safe-box\">\n            <div class=\"personal-edit-safe-item\">\n              <div class=\"personal-edit-safe-item-left\">\n                <div class=\"personal-edit-safe-item-left-label\">账户密码</div>\n              </div>\n              <div class=\"personal-edit-safe-item-right\">\n                <el-button text type=\"primary\" size=\"small\" @click=\"dialogVisible = true\">立即修改\n                </el-button>\n              </div>\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n    <!--修改密码-->\n    <el-dialog\n        title=\"修改密码\"\n        :close-on-click-modal=\"false\"\n        :visible.sync=\"dialogVisible\"\n        :before-close=\"reset\"\n        width=\"35%\">\n      <el-form ref=\"userDialogFormRef\" :model=\"modifyPwdForm\" :rules=\"rules\" size=\"default\" label-width=\"100px\">\n        <el-form-item label=\"旧密码\" prop=\"oldPassword\">\n          <el-input v-model=\"modifyPwdForm.oldPassword\"\n                    placeholder=\"请输入旧密码\"\n                    show-password\n                    clearable\n                    maxlength=\"16\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"新密码\" prop=\"newPassword1\">\n          <el-input v-model=\"modifyPwdForm.newPassword1\"\n                    placeholder=\"请输入新密码\"\n                    show-password\n                    clearable\n                    maxlength=\"16\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"确认新密码\" prop=\"newPassword2\">\n          <el-input v-model=\"modifyPwdForm.newPassword2\"\n                    placeholder=\"请重新输入新密码\"\n                    show-password\n                    clearable\n                    maxlength=\"16\"></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n\t\t\t\t<span class=\"dialog-footer\">\n\t\t\t\t\t<el-button @click=\"reset()\" size=\"small\">取 消</el-button>\n\t\t\t\t\t<el-button type=\"primary\" @click=\"onSubmit\" size=\"small\">确定</el-button>\n\t\t\t\t</span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport Scroll from 'vue-seamless-scroll';\nimport {Session} from '@/utils/storage';\nimport {formatAxis, formatDate} from '@/utils/style/formatTime';\nimport {dailyMessage} from './mock';\nimport {updatePersonal, updatePwd} from \"@/api/system/user\";\nimport {Message} from \"element-ui\";\nimport {getNotice} from \"@/api/system/notice\";\nimport {CheckNoticeRouter} from \"@/utils/addRouter\";\nimport axios from \"axios\";\n\nexport default {\n  name: 'personal',\n  components: {Scroll},\n  data() {\n    return {\n      baseURL: process.env.VUE_APP_APIUPLOAD,\n      newsInfoList: [],\n      userInfo: {},\n      dailyMessage: {},\n      replaceFlag: false,\n      personalForm: {},\n      dialogVisible: false,\n      modifyPwdForm: {},\n      IP: '',\n      rules: {\n        oldPassword: [{required: true, message: '请输入旧密码', trigger: 'blur'}],\n        newPassword1: [{required: true, message: '请输入新密码', trigger: 'blur'}],\n        newPassword2: [{required: true, message: '请输入确认新密码', trigger: 'blur'}],\n      }\n    };\n  },\n  created() {\n    this.personalForm = {...this.$store.state.userInfos.userInfos.user}\n    this.getNotice();// 获取消息通知\n    this.initUserInfo();// 初始化登录信息\n    this.initDailyMessage();// 随机语录\n    //获取ip\n    axios.get('http://api.ipify.org?format=json').then(response => {\n      this.IP = response.data.ip\n    })\n  },\n  computed: {\n    currentTime() {\n      return formatAxis(new Date());\n    },\n    optionSingleHeight() {\n      return {\n        singleHeight: 28,\n        limitMoveNum: 8,\n        waitTime: 2000,\n      };\n    },\n    getUserInfos() {\n      return this.$store.state.userInfos.userInfos.user;\n    },\n  },\n  methods: {\n    // 随机语录\n    initDailyMessage() {\n      this.dailyMessage = dailyMessage[Math.floor(Math.random() * dailyMessage.length)];\n    },\n    // 初始化登录信息\n    initUserInfo() {\n      if (!Session.get('userInfo')) return false;\n      this.userInfo = Session.get('userInfo');\n      this.userInfo.time = formatDate(new Date(this.userInfo.time), 'YYYY-mm-dd HH:MM:SS');\n    },\n    replace() {\n      this.replaceFlag = !this.replaceFlag\n      this.personalForm = {...this.$store.state.userInfos.userInfos.user}\n    },\n    getNotice() {\n      const param = {\n        status: 1,\n        pageNum: 1,\n        pageSize: 10,\n      }\n      getNotice(param).then(res => {\n        this.newsInfoList = res.data.list;\n      })\n    },\n    /**\n     * 提交个人信息修改\n     */\n    replaceSave() {\n      updatePersonal(this.personalForm).then(res => {\n        if (res.code === 200) {\n          //更新vuex数据\n          this.loadVueX()\n          this.$notify.success({\n            title: '提示',\n            message: '修改成功'\n          });\n        }\n      })\n      this.replaceFlag = false\n    },\n    /**\n     * 更新vuex数据\n     */\n    loadVueX() {\n      const userInfos = {\n        user: this.personalForm,\n        time: new Date().getTime(),\n        authBtnList: this.$store.state.userInfos.userInfos.authBtnList,\n      };\n      this.$store.dispatch('userInfos/setUserInfos', userInfos);\n      Session.set('userInfo', userInfos);\n    },\n    /**\n     * 图片上传成功回调\n     * @param res\n     * @param file\n     */\n    handleAvatarSuccess(res, file) {\n      this.personalForm.headSrc = res.data;\n      this.replaceSave()\n    },\n    /**\n     * 图片上传前调用\n     * @param file\n     * @returns {boolean}\n     */\n    beforeAvatarUpload(file) {\n      const isPNG = file.type === 'image/png';\n      const isJPG = file.type === 'image/jpeg';\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG && !isPNG) {\n        Message.error('上传头像图片只能是 JPG 或 PNG 格式!');\n      }\n      if (!isLt2M) {\n        Message.error('上传头像图片大小不能超过 2MB!');\n      }\n      const isIMG = isJPG || isPNG\n      return isIMG && isLt2M;\n    },\n    onSubmit() {\n      updatePwd(this.getUserInfos.id, this.modifyPwdForm).then(res => {\n        if (res.code === 200) {\n          this.$notify.success({\n            title: '提示',\n            message: '修改成功'\n          });\n          this.dialogVisible = false\n        }\n      })\n    },\n    // 消息通知当前项点击\n    onNewsInfoListClick(v) {\n      CheckNoticeRouter()//查询公告详情路由\n      this.$router.push({name: 'checkNotice', query: {id: v.noticeId}})\n    },\n    // 跳转到通知公告\n    onOpenNotice() {\n      this.$router.push('/notice');\n    },\n    reset() {\n      this.dialogVisible = false\n      this.$refs.userDialogFormRef.resetFields()\n      this.modifyPwdForm = {}\n    }\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import './index.scss';\n</style>\n"],"mappings":"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"}]}