{"remainingRequest":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\log\\operate-log.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\log\\operate-log.vue","mtime":1713709431000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0T3BlcmF0ZX0gZnJvbSAiQC9hcGkvbG9nL2xvZyI7CmltcG9ydCBKc29uVmlld2VyIGZyb20gJ3Z1ZS1qc29uLXZpZXdlcicKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnb3BlcmF0ZUxvZycsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogewogICAgICAgIGRhdGE6IFtdLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgIHBhcmFtOiB7CiAgICAgICAgICB1c2VyTmFtZTogJycsCiAgICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIH0KICAgICAgfSwKICAgICAgZHJhd2VyczogewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBkcmF3ZXI6IGZhbHNlLAogICAgICAgIGRpcmVjdGlvbjogJ3J0bCcsCiAgICAgICAgZGF0ZToge30KICAgICAgfQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEpzb25WaWV3ZXIKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiDojrflj5boj5zljZUKICAgICAqLwogICAgZ2V0VGFibGVEYXRhKCkgewogICAgICB0aGlzLnRhYmxlRGF0YS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0T3BlcmF0ZSh0aGlzLnRhYmxlRGF0YS5wYXJhbSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudGFibGVEYXRhLmRhdGEgPSByZXMuZGF0YS5saXN0OwogICAgICAgIHRoaXMudGFibGVEYXRhLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSwgNTAwKTsKICAgICAgfSkKICAgIH0sCiAgICAvKioKICAgICAqIOafpeivogogICAgICovCiAgICBzZWFyY2goKSB7CiAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICB9LAogICAgLyoqCiAgICAgKiDkv67mlLnmr4/pobXmiYDlrZjmlbDmja7ph4/nmoTlgLzmiYDop6blj5HnmoTlh73mlbAKICAgICAqIEBwYXJhbSB2YWwKICAgICAqLwogICAgb25IYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICAvLyDkv67mlLnpobXnmoTlpKflsI8KICAgICAgdGhpcy50YWJsZURhdGEucGFyYW0ucGFnZVNpemUgPSB2YWw7CiAgICAgIC8vIOaMieaWsOeahHBhZ2VOb+WSjHBhZ2VTaXpl6L+b6KGM5p+l6K+iCiAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICB9LAogICAgLyoqCiAgICAgKiDkv67mlLnlvZPliY3pobXmiYDop6blj5HnmoTlh73mlbAKICAgICAqIEBwYXJhbSB2YWwKICAgICAqLwogICAgb25IYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICAvLyDmm7TmlrDlvZPliY3nmoTpobUKICAgICAgdGhpcy50YWJsZURhdGEucGFyYW0ucGFnZU51bSA9IHZhbDsKICAgICAgLy8g5oyJ5paw55qEcGFnZU5v5ZKMcGFnZVNpemXov5vooYzmn6Xor6IKICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgIH0sCiAgICAvKioKICAgICAqIOaJk+W8gOivpuaDheW8ueahhgogICAgICogQHBhcmFtIHJvdwogICAgICovCiAgICBvcGVuRHJhd2VyKHJvdykgewogICAgICB0aGlzLmRyYXdlcnMudGl0bGUgPSByb3cubWV0aG9kTmFtZSArICct6K+m6K+3JwogICAgICB0aGlzLmRyYXdlcnMuZHJhd2VyID0gdHJ1ZQogICAgICB0aGlzLmRyYXdlcnMuZGF0ZSA9IHJvdwogICAgICB0aGlzLmRyYXdlcnMuZGF0ZS5yZXFQYXJhbSA9IGV2YWwoIigiICsgcm93LnJlcVBhcmFtICsgIikiKTsKICAgICAgdGhpcy5kcmF3ZXJzLmRhdGUuanNvblJlc3VsdCA9IGV2YWwoIigiICsgcm93Lmpzb25SZXN1bHQgKyAiKSIpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["operate-log.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"operate-log.vue","sourceRoot":"src/views/log","sourcesContent":["<template>\n  <div class=\"system-user-container layout-padding\">\n    <el-card shadow=\"hover\" class=\"layout-padding-auto\">\n      <div class=\"system-user-search mb15\">\n        <el-input size=\"medium\" v-model=\"tableData.param.userName\" placeholder=\"请输入账号名称\"\n                  style=\"max-width: 180px\"></el-input>\n        <el-button size=\"medium\" type=\"primary\" class=\"ml10\" icon=\"el-icon-search\" @click=\"search()\">\n          查询\n        </el-button>\n      </div>\n\n      <el-table :data=\"tableData.data\" v-loading=\"tableData.loading\" border style=\"width: 100%;min-height:calc(100vh - 320px)\">\n        <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"60\"/>\n        <el-table-column prop=\"methodName\" label=\"操作方法\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"userName\" label=\"操作人\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"status\" label=\"操作状态\" align=\"center\" show-overflow-tooltip>\n          <template #default=\"scope\">\n            <el-tag type=\"success\" v-if=\"scope.row.status === 1\">成功</el-tag>\n            <el-tag type=\"info\" v-if=\"scope.row.status === 0\">失败</el-tag>\n            <el-tag type=\"danger\" v-if=\"scope.row.status === 2\">异常</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"reqIp\" label=\"请求IP\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"reqInterface\" label=\"请求接口\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"reqType\" label=\"请求方式\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"browser\" label=\"操作浏览器类型\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"createTime\" label=\"操作时间\" align=\"center\" width=\"200\"></el-table-column>\n        <el-table-column prop=\"expendTime\" label=\"执行时长\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column label=\"操作\">\n          <template #default=\"scope\">\n            <el-button size=\"small\" type=\"text\" @click=\"openDrawer(scope.row)\">详情</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-pagination\n          @size-change=\"onHandleSizeChange\"\n          @current-change=\"onHandleCurrentChange\"\n          class=\"mt15\"\n          :pager-count=\"5\"\n          :page-sizes=\"[10, 20, 30]\"\n          v-model:current-page=\"tableData.param.pageNum\"\n          background\n          v-model:page-size=\"tableData.param.pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"tableData.total\"\n      >\n      </el-pagination>\n    </el-card>\n\n    <el-drawer\n        :with-header=\"false\"\n        :visible.sync=\"drawers.drawer\"\n        :direction=\"drawers.direction\">\n      <el-descriptions :title=\"drawers.title\" direction=\"vertical\" :column=\"2\" border class=\"descriptions\">\n        <el-descriptions-item label=\"操作人\" :span=\"2\">{{ drawers.date.userName }}</el-descriptions-item>\n        <el-descriptions-item label=\"操作系统类型\" :span=\"2\">{{ drawers.date.os }}</el-descriptions-item>\n        <el-descriptions-item label=\"操作时间\">{{ drawers.date.createTime }}</el-descriptions-item>\n        <el-descriptions-item label=\"执行时长\">{{ drawers.date.expendTime }}</el-descriptions-item>\n        <el-descriptions-item label=\"请求参数\" :span=\"2\">\n          <json-viewer :value=\"drawers.date.reqParam\"></json-viewer>\n        </el-descriptions-item>\n        <el-descriptions-item label=\"返回参数\" :span=\"2\">\n          <json-viewer :value=\"drawers.date.jsonResult\"></json-viewer>\n        </el-descriptions-item>\n      </el-descriptions>\n    </el-drawer>\n\n  </div>\n</template>\n\n<script>\nimport {getOperate} from \"@/api/log/log\";\nimport JsonViewer from 'vue-json-viewer'\n\nexport default {\n  name: 'operateLog',\n  data() {\n    return {\n      tableData: {\n        data: [],\n        total: 0,\n        loading: false,\n        param: {\n          userName: '',\n          pageNum: 1,\n          pageSize: 10,\n        }\n      },\n      drawers: {\n        title: '',\n        drawer: false,\n        direction: 'rtl',\n        date: {}\n      }\n    };\n  },\n  components: {\n    JsonViewer\n  },\n  mounted() {\n    this.getTableData();\n  },\n  methods: {\n    /**\n     * 获取菜单\n     */\n    getTableData() {\n      this.tableData.loading = true;\n      getOperate(this.tableData.param).then(res => {\n        this.tableData.data = res.data.list;\n        this.tableData.total = res.data.total;\n        setTimeout(() => {\n          this.tableData.loading = false;\n        }, 500);\n      })\n    },\n    /**\n     * 查询\n     */\n    search() {\n      this.getTableData();\n    },\n    /**\n     * 修改每页所存数据量的值所触发的函数\n     * @param val\n     */\n    onHandleSizeChange(val) {\n      // 修改页的大小\n      this.tableData.param.pageSize = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n    /**\n     * 修改当前页所触发的函数\n     * @param val\n     */\n    onHandleCurrentChange(val) {\n      // 更新当前的页\n      this.tableData.param.pageNum = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n    /**\n     * 打开详情弹框\n     * @param row\n     */\n    openDrawer(row) {\n      this.drawers.title = row.methodName + '-详请'\n      this.drawers.drawer = true\n      this.drawers.date = row\n      this.drawers.date.reqParam = eval(\"(\" + row.reqParam + \")\");\n      this.drawers.date.jsonResult = eval(\"(\" + row.jsonResult + \")\");\n    }\n  }\n};\n</script>\n\n<style>\n.descriptions {\n  width: 95%;\n  margin: 15px auto;\n}\n\n//抽屉从右往左开 隐藏滚动条\n.el-drawer.rtl{\n  overflow: auto;\n}\n.el-drawer__container ::-webkit-scrollbar{\n  display: none;\n}\n\n*{scrollbar-width: none;\n}\n\n</style>\n"]}]}