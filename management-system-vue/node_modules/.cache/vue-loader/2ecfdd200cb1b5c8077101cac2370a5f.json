{"remainingRequest":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\system\\notice\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\system\\notice\\index.vue","mtime":1715495478152},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7TWVzc2FnZSwgTWVzc2FnZUJveH0gZnJvbSAiZWxlbWVudC11aSI7CmltcG9ydCB7Y2hhbmdlU3RhdHVzLCBkZWxOb3RpY2UsIGdldE5vdGljZX0gZnJvbSAiQC9hcGkvc3lzdGVtL25vdGljZSI7CmltcG9ydCB7Q2hlY2tOb3RpY2VSb3V0ZXIsIGFkZE9yRWRpdE5vdGljZVJvdXRlcn0gZnJvbSAiQC91dGlscy9hZGRSb3V0ZXIiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ05vdGljZScsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogewogICAgICAgIGRhdGE6IFtdLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgIHBhcmFtOiB7CiAgICAgICAgICBub3RpY2VUaXRsZTogJycsCiAgICAgICAgICBzdGF0dXM6ICcnLAogICAgICAgICAgcGFnZU51bTogMSwKICAgICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICB9LAogICAgICB9LAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiDojrflj5bpgJrnn6XlhazlkYoKICAgICAqLwogICAgZ2V0VGFibGVEYXRhKCkgewogICAgICAvL+afpeivouadg+mZkO+8jOaXoOadg+mZkOS7heafpeivouW3suWPkeW4g+eKtuaAgQogICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IHN0b3JlLnN0YXRlLnVzZXJJbmZvcy51c2VySW5mb3MuYXV0aEJ0bkxpc3QKICAgICAgaWYgKCFwZXJtaXNzaW9ucy5pbmNsdWRlcygic3lzdGVtOm5vdGljZTp1cGRhdGUiKSkgdGhpcy50YWJsZURhdGEucGFyYW0uc3RhdHVzID0gMTsKICAgICAgdGhpcy50YWJsZURhdGEubG9hZGluZyA9IHRydWU7CiAgICAgIC8v5p+l6K+iCiAgICAgIGdldE5vdGljZSh0aGlzLnRhYmxlRGF0YS5wYXJhbSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudGFibGVEYXRhLmRhdGEgPSByZXMuZGF0YS5saXN0OwogICAgICAgIHRoaXMudGFibGVEYXRhLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSwgNTAwKTsKICAgICAgfSkKICAgIH0sCiAgICAvKioKICAgICAqIOa3u+WKoOaIluS/ruaUueW8ueahhgogICAgICogQHBhcmFtIGZsYWcKICAgICAqIEBwYXJhbSByb3cKICAgICAqLwogICAgb3BlbkFkZE9yVXBkYXRlKGZsYWcsIHJvdykgewogICAgICAvL+a3u+WKoOi3r+eUsQogICAgICBhZGRPckVkaXROb3RpY2VSb3V0ZXIoKS8v5re75Yqg44CB5L+u5pS56YCa55+l5YWs5ZGK6Lev55SxCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnYWRkT3JFZGl0LW5vdGljZScsIHBhcmFtczoge2ZsYWc6IGZsYWcsIHJvdzogcm93fX0pCiAgICB9LAogICAgLyoqCiAgICAgKiDliKDpmaTpgJrnn6XlhazlkYoKICAgICAqIEBwYXJhbSByb3cKICAgICAqLwogICAgb25Sb3dEZWwocm93KSB7CiAgICAgIC8v5o+Q56S6CiAgICAgIE1lc3NhZ2VCb3guY29uZmlybShg5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6YCa55+l5YWs5ZGK5qCH6aKY5Li677ya4oCcJHtyb3cubm90aWNlVGl0bGV94oCd55qE5pWw5o2u77yM5piv5ZCm57un57utP2AsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7orqQnLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgLy/osIPnlKjliKDpmaTmlrnms5UKICAgICAgICBkZWxOb3RpY2Uocm93Lm5vdGljZUlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgICAgICAgTWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKICAgICAgICB9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5p+l55yL6YCa55+l5YWs5ZGK6K+m5oOFCiAgICAgKiBAcGFyYW0gcm93CiAgICAgKi8KICAgIG9wZW5DaGVjayhyb3cpIHsKICAgICAgQ2hlY2tOb3RpY2VSb3V0ZXIoKS8v5p+l6K+i5YWs5ZGK6K+m5oOF6Lev55SxCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnY2hlY2tOb3RpY2UnLCBxdWVyeToge2lkOiByb3cubm90aWNlSWR9fSkKICAgIH0sCiAgICAvKioKICAgICAqIOmAmuefpeWFrOWRiuS/ruaUueWbnuiwgwogICAgICovCiAgICBjaGFuZ2VTdGF0dXMocm93KSB7CiAgICAgIGNoYW5nZVN0YXR1cyhyb3cubm90aWNlSWQsIHJvdy5zdGF0dXMpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgTWVzc2FnZS5zdWNjZXNzKHJlcy5tZXNzYWdlKTsKICAgICAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgLyoqCiAgICAgKiDkv67mlLnmr4/pobXmiYDlrZjmlbDmja7ph4/nmoTlgLzmiYDop6blj5HnmoTlh73mlbAKICAgICAqIEBwYXJhbSB2YWwKICAgICAqLwogICAgb25IYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICAvLyDkv67mlLnpobXnmoTlpKflsI8KICAgICAgdGhpcy50YWJsZURhdGEucGFyYW0ucGFnZVNpemUgPSB2YWw7CiAgICAgIC8vIOaMieaWsOeahHBhZ2VOb+WSjHBhZ2VTaXpl6L+b6KGM5p+l6K+iCiAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICB9LAogICAgLyoqCiAgICAgKiDkv67mlLnlvZPliY3pobXmiYDop6blj5HnmoTlh73mlbAKICAgICAqIEBwYXJhbSB2YWwKICAgICAqLwogICAgb25IYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICAvLyDmm7TmlrDlvZPliY3nmoTpobUKICAgICAgdGhpcy50YWJsZURhdGEucGFyYW0ucGFnZU51bSA9IHZhbDsKICAgICAgLy8g5oyJ5paw55qEcGFnZU5v5ZKMcGFnZVNpemXov5vooYzmn6Xor6IKICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/notice","sourcesContent":["<template>\n  <div class=\"system-user-container layout-padding\">\n    <el-card shadow=\"hover\" class=\"layout-padding-auto\">\n      <div class=\"system-user-search mb15\">\n        <el-input size=\"medium\" v-model=\"tableData.param.noticeTitle\" placeholder=\"请输入通知公告名称\" clearable\n                  style=\"max-width: 200px\"></el-input>\n        <el-button size=\"medium\" type=\"primary\" class=\"ml10\" icon=\"el-icon-search\" @click=\"getTableData()\">\n          查询\n        </el-button>\n        <el-button size=\"medium\" type=\"success\" class=\"ml10\" icon=\"el-icon-plus\"\n                   v-hasPermi=\"['system:notice:add']\"\n                   @click=\"openAddOrUpdate('add',1)\">\n          新增\n        </el-button>\n      </div>\n\n      <el-table :data=\"tableData.data\" v-loading=\"tableData.loading\" style=\"width: 100%;min-height:calc(100vh - 320px)\">\n        <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"60\"/>\n        <el-table-column prop=\"noticeTitle\" label=\"标题\" align=\"center\" width=\"400\"\n                         show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"noticeType\" label=\"类型\" align=\"center\" show-overflow-tooltip>\n          <template #default=\"scope\">\n            {{ scope.row.noticeType === '1' ? '通知' : '公告' }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"status\" label=\"状态\" align=\"center\">\n          <template #default=\"scope\">\n            <el-switch\n                @change=\"changeStatus(scope.row)\"\n                style=\"display: block\"\n                v-model=\"scope.row.status\"\n                active-color=\"#13ce66\"\n                inactive-color=\"#ff4949\"\n                active-text=\"发布中\"\n                inactive-text=\"编辑\">\n            </el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"createBy\" label=\"创建人\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"createTime\" label=\"创建时间\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"updateBy\" label=\"修改人\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"updateTime\" label=\"修改时间\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <!--        <el-table-column prop=\"remark\" label=\"备注\" align=\"center\" show-overflow-tooltip></el-table-column>-->\n        <el-table-column label=\"操作\" align=\"center\" width=\"200px\">\n          <template #default=\"scope\">\n            <el-button size=\"small\"\n                       type=\"text\"\n                       icon=\"el-icon-view\"\n                       @click=\"openCheck(scope.row)\"\n            >查看\n            </el-button>\n            <el-button size=\"small\"\n                       type=\"text\"\n                       icon=\"el-icon-edit\"\n                       v-hasPermi=\"['system:notice:update']\"\n                       @click=\"openAddOrUpdate('edit', scope.row)\"\n            >修改\n            </el-button>\n            <el-button size=\"small\"\n                       type=\"text\"\n                       icon=\"el-icon-delete\"\n                       v-hasPermi=\"['system:notice:delete']\"\n                       @click=\"onRowDel(scope.row)\">删除\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-pagination\n          @size-change=\"onHandleSizeChange\"\n          @current-change=\"onHandleCurrentChange\"\n          class=\"mt15\"\n          :pager-count=\"5\"\n          :page-sizes=\"[10, 20, 30]\"\n          v-model:current-page=\"tableData.param.pageNum\"\n          background\n          v-model:page-size=\"tableData.param.pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"tableData.total\"\n      >\n      </el-pagination>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport {Message, MessageBox} from \"element-ui\";\nimport {changeStatus, delNotice, getNotice} from \"@/api/system/notice\";\nimport {CheckNoticeRouter, addOrEditNoticeRouter} from \"@/utils/addRouter\";\nimport store from \"@/store\";\n\nexport default {\n  name: 'Notice',\n  data() {\n    return {\n      tableData: {\n        data: [],\n        total: 0,\n        loading: false,\n        param: {\n          noticeTitle: '',\n          status: '',\n          pageNum: 1,\n          pageSize: 10,\n        },\n      },\n    };\n  },\n  mounted() {\n    this.getTableData();\n  },\n  methods: {\n    /**\n     * 获取通知公告\n     */\n    getTableData() {\n      //查询权限，无权限仅查询已发布状态\n      const permissions = store.state.userInfos.userInfos.authBtnList\n      if (!permissions.includes(\"system:notice:update\")) this.tableData.param.status = 1;\n      this.tableData.loading = true;\n      //查询\n      getNotice(this.tableData.param).then(res => {\n        this.tableData.data = res.data.list;\n        this.tableData.total = res.data.total;\n        setTimeout(() => {\n          this.tableData.loading = false;\n        }, 500);\n      })\n    },\n    /**\n     * 添加或修改弹框\n     * @param flag\n     * @param row\n     */\n    openAddOrUpdate(flag, row) {\n      //添加路由\n      addOrEditNoticeRouter()//添加、修改通知公告路由\n      this.$router.push({name: 'addOrEdit-notice', params: {flag: flag, row: row}})\n    },\n    /**\n     * 删除通知公告\n     * @param row\n     */\n    onRowDel(row) {\n      //提示\n      MessageBox.confirm(`此操作将永久删除通知公告标题为：“${row.noticeTitle}”的数据，是否继续?`, '提示', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(() => {\n        //调用删除方法\n        delNotice(row.noticeId).then(res => {\n          this.getTableData();\n          Message.success(\"删除成功\");\n        })\n      }).catch(() => {\n      });\n    },\n    /**\n     * 查看通知公告详情\n     * @param row\n     */\n    openCheck(row) {\n      CheckNoticeRouter()//查询公告详情路由\n      this.$router.push({name: 'checkNotice', query: {id: row.noticeId}})\n    },\n    /**\n     * 通知公告修改回调\n     */\n    changeStatus(row) {\n      changeStatus(row.noticeId, row.status).then(res => {\n        if (res.code === 200) {\n          Message.success(res.message);\n          this.getTableData()\n        }\n      })\n    },\n    /**\n     * 修改每页所存数据量的值所触发的函数\n     * @param val\n     */\n    onHandleSizeChange(val) {\n      // 修改页的大小\n      this.tableData.param.pageSize = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n    /**\n     * 修改当前页所触发的函数\n     * @param val\n     */\n    onHandleCurrentChange(val) {\n      // 更新当前的页\n      this.tableData.param.pageNum = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n  }\n};\n</script>\n"]}]}