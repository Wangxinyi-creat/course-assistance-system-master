{"remainingRequest":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\scas\\course\\dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\scas\\course\\dialog.vue","mtime":1713709431000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7TWVzc2FnZX0gZnJvbSAiZWxlbWVudC11aSI7CmltcG9ydCB7YWRkQ291cnNlLCB1cGRhdGVDb3Vyc2V9IGZyb20gIkAvYXBpL3NjYXMvY291cnNlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBkaWN0U2VsZWN0OiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50L2RpY3RTZWxlY3QvaW5kZXgudnVlIikKICB9LAogIG5hbWU6ICdDb3Vyc2VEaWFsb2cnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2c6IHsKICAgICAgICBpc1Nob3dEaWFsb2c6IGZhbHNlLAogICAgICAgIHR5cGU6ICcnLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBzdWJtaXRUeHQ6ICcnLAogICAgICB9LAogICAgICBydWxlRm9ybToge30sCiAgICAgIGNsYXNzVGltZUxpc3Q6IFt7CiAgICAgICAgZGljdExhYmVsOiAnJywKICAgICAgICBkaWN0VmFsdWU6ICcnCiAgICAgIH1dLAogICAgICBydWxlczogewogICAgICAgIGNvdXJzZU5hbWU6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXor77nqIvlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cid9XSwKICAgICAgICBjb3Vyc2VUeXBlOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup6K++56iL57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZSd9XSwKICAgICAgICBzdGF0dXM6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nor77nqIvnirbmgIEnLCB0cmlnZ2VyOiAnY2hhbmdlJ31dCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIOaJk+W8gOW8ueahhgogICAgICogQHBhcmFtIHR5cGUKICAgICAqIEBwYXJhbSByb3cKICAgICAqLwogICAgb3BlbkRpYWxvZyh0eXBlLCByb3cpIHsKICAgICAgaWYgKHR5cGUgPT09ICdlZGl0JykgewogICAgICAgIHRoaXMucnVsZUZvcm0gPSB7Li4ucm93fQogICAgICAgIHRoaXMuY2xhc3NUaW1lTGlzdCA9IEpTT04ucGFyc2Uocm93LmNsYXNzVGltZSkKICAgICAgICB0aGlzLmRpYWxvZy50aXRsZSA9ICfkv67mlLnor77nqIsnOwogICAgICAgIHRoaXMuZGlhbG9nLnN1Ym1pdFR4dCA9ICfkv64g5pS5JzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJ1bGVGb3JtID0gewogICAgICAgICAgY291cnNlTmFtZTogJycsCiAgICAgICAgICBjbGFzc1RpbWU6ICcnLAogICAgICAgICAgY291cnNlVHlwZTogJycsCiAgICAgICAgICBjb3Vyc2VEZXNjcmlwdGlvbjogJycsCiAgICAgICAgICBzdGF0dXM6ICcnCiAgICAgICAgfQogICAgICAgIHRoaXMuZGlhbG9nLnRpdGxlID0gJ+aWsOWinuivvueoiyc7CiAgICAgICAgdGhpcy5kaWFsb2cuc3VibWl0VHh0ID0gJ+aWsCDlop4nOwogICAgICB9CiAgICAgIHRoaXMuZGlhbG9nLnR5cGUgPSB0eXBlCiAgICAgIHRoaXMuZGlhbG9nLmlzU2hvd0RpYWxvZyA9IHRydWU7CiAgICB9LAogICAgLyoqCiAgICAgKiDlhbPpl63lvLnmoYYKICAgICAqLwogICAgb25DYW5jZWwoKSB7CiAgICAgIHRoaXMuZGlhbG9nLmlzU2hvd0RpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmNsYXNzVGltZUxpc3QgPSBbewogICAgICAgIGRpY3RMYWJlbDogJycsCiAgICAgICAgZGljdFZhbHVlOiAnJwogICAgICB9XTsKICAgICAgdGhpcy4kcmVmcy5jb3Vyc2VEaWFsb2dGb3JtUmVmLnJlc2V0RmllbGRzKCkKICAgIH0sCiAgICAvLyDmlrDlop7ooYwKICAgIG9uQWRkUm93KCkgewogICAgICB0aGlzLmNsYXNzVGltZUxpc3QucHVzaCh7CiAgICAgICAgZGljdExhYmVsOiAnJywKICAgICAgICBkaWN0VmFsdWU6ICcnLAogICAgICB9KTsKICAgIH0sCiAgICAvLyDliKDpmaTooYwKICAgIG9uRGVsUm93KGspIHsKICAgICAgdGhpcy5jbGFzc1RpbWVMaXN0LnNwbGljZShrLCAxKTsKICAgIH0sCiAgICAvKioKICAgICAqIOaWsOWini/kv67mlLkgIOS/neWtmAogICAgICogQHBhcmFtIGZsYWcKICAgICAqLwogICAgb25TdWJtaXQoZmxhZykgewogICAgICB0aGlzLiRyZWZzWyJjb3Vyc2VEaWFsb2dGb3JtUmVmIl0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5ydWxlRm9ybS5jbGFzc1RpbWUgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmNsYXNzVGltZUxpc3QpCiAgICAgICAgICBpZiAoZmxhZyA9PT0gJ2VkaXQnKSB7CiAgICAgICAgICAgIHVwZGF0ZUNvdXJzZSh0aGlzLnJ1bGVGb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgIE1lc3NhZ2Uuc3VjY2VzcyhyZXMubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdyZWZyZXNoJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWRkQ291cnNlKHRoaXMucnVsZUZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgTWVzc2FnZS5zdWNjZXNzKHJlcy5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3JlZnJlc2gnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLm9uQ2FuY2VsKCk7CiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0KfTsK"},{"version":3,"sources":["dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dialog.vue","sourceRoot":"src/views/scas/course","sourcesContent":["<template>\n  <div class=\"system-menu-dialog-container\">\n    <el-dialog :title=\"dialog.title\"\n               :visible.sync=\"dialog.isShowDialog\"\n               :close-on-click-modal=\"false\"\n               width=\"769px\">\n      <el-form ref=\"courseDialogFormRef\" :model=\"ruleForm\" :rules=\"rules\" size=\"default\" label-width=\"100px\">\n        <el-row :gutter=\"35\">\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-form-item label=\"课程名称\" prop=\"courseName\">\n              <el-input v-model=\"ruleForm.courseName\" placeholder=\"请输入课程名称\" clearable></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xl=\"12\" class=\"mb20\">\n            <el-form-item label=\"课程类型\" prop=\"courseType\">\n              <dictSelect v-model=\"ruleForm.courseType\" dictType=\"courseType\" placeholder=\"请选择课程类型\"></dictSelect>\n            </el-form-item>\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xl=\"12\" class=\"mb20\">\n            <el-form-item label=\"课程状态\" prop=\"status\">\n              <dictSelect v-model=\"ruleForm.status\" dictType=\"courseStatus\" placeholder=\"请选择课程状态\"></dictSelect>\n            </el-form-item>\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-form-item label=\"课程介绍\" prop=\"courseDescription\">\n              <el-input v-model=\"ruleForm.courseDescription\" placeholder=\"请输入课程介绍\" clearable type=\"textarea\"\n                        :rows=\"5\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-row :gutter=\"10\" v-for=\"(v, k) in classTimeList\" :key=\"k\">\n              <el-col :xs=\"24\" :sm=\"12\" :md=\"10\" :lg=\"10\" :xl=\"10\" class=\"mb20\">\n                <el-form-item>\n                  <template #label>\n                    <el-button type=\"primary\" circle size=\"small\" @click=\"onAddRow\" v-if=\"k === 0\">\n                      <el-icon class=\"el-icon-plus\"></el-icon>\n                    </el-button>\n                    <el-button type=\"danger\" circle size=\"small\" @click=\"onDelRow(k)\" v-else>\n                      <el-icon class=\"el-icon-delete\"></el-icon>\n                    </el-button>\n                    <span class=\"ml10\">星期</span>\n                  </template>\n                  <dictSelect v-model=\"v.dictLabel\" dictType=\"week\" placeholder=\"请选择星期\"></dictSelect>\n                </el-form-item>\n              </el-col>\n              <el-col :xs=\"24\" :sm=\"12\" :md=\"14\" :lg=\"14\" :xl=\"14\" class=\"mb20\">\n                <el-form-item label=\"时间\">\n                  <el-input v-model=\"v.dictValue\" style=\"width: 100%\" placeholder=\"请输入时间\"></el-input>\n                </el-form-item>\n              </el-col>\n            </el-row>\n          </el-col>\n        </el-row>\n      </el-form>\n      <template #footer>\n\t\t\t\t<span class=\"dialog-footer\">\n\t\t\t\t\t<el-button @click=\"onCancel\" size=\"default\">取 消</el-button>\n\t\t\t\t\t<el-button type=\"primary\" @click=\"onSubmit(dialog.type)\" size=\"default\">{{ dialog.submitTxt }}</el-button>\n\t\t\t\t</span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {Message} from \"element-ui\";\nimport {addCourse, updateCourse} from \"@/api/scas/course\";\n\nexport default {\n  components: {\n    dictSelect: () => import(\"@/component/dictSelect/index.vue\")\n  },\n  name: 'CourseDialog',\n  data() {\n    return {\n      dialog: {\n        isShowDialog: false,\n        type: '',\n        title: '',\n        submitTxt: '',\n      },\n      ruleForm: {},\n      classTimeList: [{\n        dictLabel: '',\n        dictValue: ''\n      }],\n      rules: {\n        courseName: [{required: true, message: '请输入课程名称', trigger: 'blur'}],\n        courseType: [{required: true, message: '请选择课程类型', trigger: 'change'}],\n        status: [{required: true, message: '请选择课程状态', trigger: 'change'}]\n      }\n    };\n  },\n  methods: {\n    /**\n     * 打开弹框\n     * @param type\n     * @param row\n     */\n    openDialog(type, row) {\n      if (type === 'edit') {\n        this.ruleForm = {...row}\n        this.classTimeList = JSON.parse(row.classTime)\n        this.dialog.title = '修改课程';\n        this.dialog.submitTxt = '修 改';\n      } else {\n        this.ruleForm = {\n          courseName: '',\n          classTime: '',\n          courseType: '',\n          courseDescription: '',\n          status: ''\n        }\n        this.dialog.title = '新增课程';\n        this.dialog.submitTxt = '新 增';\n      }\n      this.dialog.type = type\n      this.dialog.isShowDialog = true;\n    },\n    /**\n     * 关闭弹框\n     */\n    onCancel() {\n      this.dialog.isShowDialog = false;\n      this.classTimeList = [{\n        dictLabel: '',\n        dictValue: ''\n      }];\n      this.$refs.courseDialogFormRef.resetFields()\n    },\n    // 新增行\n    onAddRow() {\n      this.classTimeList.push({\n        dictLabel: '',\n        dictValue: '',\n      });\n    },\n    // 删除行\n    onDelRow(k) {\n      this.classTimeList.splice(k, 1);\n    },\n    /**\n     * 新增/修改  保存\n     * @param flag\n     */\n    onSubmit(flag) {\n      this.$refs[\"courseDialogFormRef\"].validate(valid => {\n        if (valid) {\n          this.ruleForm.classTime = JSON.stringify(this.classTimeList)\n          if (flag === 'edit') {\n            updateCourse(this.ruleForm).then(res => {\n              if (res.code === 200) {\n                Message.success(res.message);\n                this.$emit('refresh');\n              }\n            })\n          } else {\n            addCourse(this.ruleForm).then(res => {\n              if (res.code === 200) {\n                Message.success(res.message);\n                this.$emit('refresh');\n              }\n            })\n          }\n          this.onCancel();\n        }\n      })\n    }\n  }\n};\n</script>\n\n<style>\n/* 前面的.el-table可替换为需要设置滚动条的class */\n.el-dialog ::-webkit-scrollbar {\n  width: 3px !important;\n  height: 10px !important;\n  border-radius: 5px;\n}\n\n.el-dialog ::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  -webkit-box-shadow: inset 0 0 3px rgba(0, 0, 0, 0.2);\n  /* 滚动条的颜色 */\n  background-color: #89898c;\n}\n</style>\n"]}]}