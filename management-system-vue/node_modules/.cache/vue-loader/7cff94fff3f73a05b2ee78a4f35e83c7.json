{"remainingRequest":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\layout\\navBars\\topBar\\user.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\layout\\navBars\\topBar\\user.vue","mtime":1713709431000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzY3JlZW5mdWxsIGZyb20gJ3NjcmVlbmZ1bGwnOwppbXBvcnQge1Nlc3Npb24sIExvY2FsfSBmcm9tICdAL3V0aWxzL3N0b3JhZ2UuanMnOwppbXBvcnQgU2VhcmNoIGZyb20gJ0AvbGF5b3V0L25hdkJhcnMvdG9wQmFyL3NlYXJjaC52dWUnOwppbXBvcnQge3NpZ25PdXR9IGZyb20gIi4uLy4uLy4uL2FwaS9sb2dpbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2xheW91dEJyZWFkY3J1bWJVc2VyJywKICBjb21wb25lbnRzOiB7U2VhcmNofSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNTY3JlZW5mdWxsOiBmYWxzZSwKICAgICAgZGlzYWJsZWRJMThuOiAnemgtY24nLAogICAgICBkaXNhYmxlZFNpemU6ICcnLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDojrflj5bnlKjmiLfkv6Hmga8KICAgIGdldFVzZXJJbmZvcygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvcy51c2VySW5mb3MudXNlcjsKICAgIH0sCiAgICAvLyDorr7nva7lvLnmgKfnm5LlrZDluIPlsYAgZmxleAogICAgbGF5b3V0VXNlckZsZXhOdW0oKSB7CiAgICAgIGxldCB7bGF5b3V0LCBpc0NsYXNzaWNTcGxpdE1lbnV9ID0gdGhpcy4kc3RvcmUuc3RhdGUudGhlbWVDb25maWcudGhlbWVDb25maWc7CiAgICAgIGxldCBudW0gPSAnJzsKICAgICAgaWYgKGxheW91dCA9PT0gJ2RlZmF1bHRzJyB8fCAobGF5b3V0ID09PSAnY2xhc3NpYycgJiYgIWlzQ2xhc3NpY1NwbGl0TWVudSkgfHwgbGF5b3V0ID09PSAnY29sdW1ucycpIG51bSA9IDE7CiAgICAgIGVsc2UgbnVtID0gbnVsbDsKICAgICAgcmV0dXJuIG51bTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKExvY2FsLmdldCgndGhlbWVDb25maWdQcmV2JykpIHsKICAgICAgdGhpcy5pbml0Q29tcG9uZW50U2l6ZSgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5pCc57Si54K55Ye7CiAgICBvblNlYXJjaENsaWNrKCkgewogICAgICB0aGlzLiRyZWZzLnNlYXJjaFJlZi5vcGVuU2VhcmNoKCk7CiAgICB9LAogICAgLy8g5biD5bGA6YWN572u54K55Ye7CiAgICBvbkxheW91dFNldGluZ0NsaWNrKCkgewogICAgICB0aGlzLmJ1cy4kZW1pdCgnb3BlblNldGluZ3NEcmF3ZXInKTsKICAgIH0sCiAgICAvLyDlhajlsY/ngrnlh7sKICAgIG9uU2NyZWVuZnVsbENsaWNrKCkgewogICAgICBpZiAoIXNjcmVlbmZ1bGwuaXNFbmFibGVkKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfmmoLkuI3kuI3mlK/mjIHlhajlsY8nKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgc2NyZWVuZnVsbC50b2dnbGUoKTsKICAgICAgc2NyZWVuZnVsbC5vbignY2hhbmdlJywgKCkgPT4gewogICAgICAgIGlmIChzY3JlZW5mdWxsLmlzRnVsbHNjcmVlbikgdGhpcy5pc1NjcmVlbmZ1bGwgPSB0cnVlOwogICAgICAgIGVsc2UgdGhpcy5pc1NjcmVlbmZ1bGwgPSBmYWxzZTsKICAgICAgfSk7CiAgICAgIC8vIOebkeWQrOiPnOWNlSBob3Jpem9udGFsLnZ1ZSDmu5rliqjmnaHpq5jluqbmm7TmlrAKICAgICAgdGhpcy5idXMuJGVtaXQoJ3VwZGF0ZUVsU2Nyb2xsQmFyJyk7CiAgICB9LAogICAgLy8g57uE5Lu25aSn5bCP5pS55Y+YCiAgICBvbkNvbXBvbmVudFNpemVDaGFuZ2Uoc2l6ZSkgewogICAgICBMb2NhbC5yZW1vdmUoJ3RoZW1lQ29uZmlnUHJldicpOwogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS50aGVtZUNvbmZpZy50aGVtZUNvbmZpZy5nbG9iYWxDb21wb25lbnRTaXplID0gc2l6ZTsKICAgICAgTG9jYWwuc2V0KCd0aGVtZUNvbmZpZ1ByZXYnLCB0aGlzLiRzdG9yZS5zdGF0ZS50aGVtZUNvbmZpZy50aGVtZUNvbmZpZyk7CiAgICAgIHRoaXMuJEVMRU1FTlQuc2l6ZSA9IHNpemU7CiAgICAgIHRoaXMuaW5pdENvbXBvbmVudFNpemUoKTsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSwKICAgIC8vIOWIneWni+WMluWFqOWxgOe7hOS7tuWkp+WwjwogICAgaW5pdENvbXBvbmVudFNpemUoKSB7CiAgICAgIHN3aXRjaCAoTG9jYWwuZ2V0KCd0aGVtZUNvbmZpZ1ByZXYnKS5nbG9iYWxDb21wb25lbnRTaXplKSB7CiAgICAgICAgY2FzZSAnJzoKICAgICAgICAgIHRoaXMuZGlzYWJsZWRTaXplID0gJyc7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdtZWRpdW0nOgogICAgICAgICAgdGhpcy5kaXNhYmxlZFNpemUgPSAnbWVkaXVtJzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3NtYWxsJzoKICAgICAgICAgIHRoaXMuZGlzYWJsZWRTaXplID0gJ3NtYWxsJzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ21pbmknOgogICAgICAgICAgdGhpcy5kaXNhYmxlZFNpemUgPSAnbWluaSc7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIC8vIGBkcm9wZG93biDkuIvmi4noj5zljZVgIOW9k+WJjemhueeCueWHuwogICAgb25Ecm9wZG93bkNvbW1hbmQocGF0aCkgewogICAgICBpZiAocGF0aCA9PT0gJ2xvZ091dCcpIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1zZ2JveCh7CiAgICAgICAgICAgIGNsb3NlT25DbGlja01vZGFsOiBmYWxzZSwKICAgICAgICAgICAgY2xvc2VPblByZXNzRXNjYXBlOiBmYWxzZSwKICAgICAgICAgICAgdGl0bGU6ICfmj5DnpLonLAogICAgICAgICAgICBtZXNzYWdlOiAn5q2k5pON5L2c5bCG6YCA5Ye655m75b2VLCDmmK/lkKbnu6fnu60/JywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IChhY3Rpb24sIGluc3RhbmNlLCBkb25lKSA9PiB7CiAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NvbmZpcm0nKSB7CiAgICAgICAgICAgICAgICBzaWduT3V0KCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jb25maXJtQnV0dG9uTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbmZpcm1CdXR0b25UZXh0ID0gJ+mAgOWHuuS4rSc7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGRvbmUoKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbmZpcm1CdXR0b25Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgICAgICAgfSwgNzAwKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvbmUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KQogICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIOa4hemZpOe8k+WtmC90b2tlbuetiQogICAgICAgICAgICAgICAgU2Vzc2lvbi5jbGVhcigpOwogICAgICAgICAgICAgICAgLy8g5L2/55SoIHJlbG9hZCDml7bvvIzkuI3pnIDopoHosIPnlKggcmVzZXRSb3V0ZSgpIOmHjee9rui3r+eUsQogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICB9KTsKICAgICAgICB9LCAxNTApOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHBhdGgpOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["user.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user.vue","sourceRoot":"src/layout/navBars/topBar","sourcesContent":["<template>\n  <div class=\"layout-navbars-breadcrumb-user\" :style=\"{ flex: layoutUserFlexNum }\">\n    <!--大小调整-->\n    <el-dropdown :show-timeout=\"70\" :hide-timeout=\"50\" trigger=\"click\" @command=\"onComponentSizeChange\">\n      <div class=\"layout-navbars-breadcrumb-user-icon\">\n        <i class=\"iconfont icon-ziti\" :title=\"'组件大小'\"></i>\n      </div>\n      <template #dropdown>\n        <el-dropdown-menu>\n          <el-dropdown-item command=\"\" :disabled=\"disabledSize === ''\">默认</el-dropdown-item>\n          <el-dropdown-item command=\"medium\" :disabled=\"disabledSize === 'medium'\">中等</el-dropdown-item>\n          <el-dropdown-item command=\"small\" :disabled=\"disabledSize === 'small'\">小型</el-dropdown-item>\n          <el-dropdown-item command=\"mini\" :disabled=\"disabledSize === 'mini'\">超小</el-dropdown-item>\n        </el-dropdown-menu>\n      </template>\n    </el-dropdown>\n    <!--菜单搜索-->\n    <div class=\"layout-navbars-breadcrumb-user-icon\" @click=\"onSearchClick\">\n      <i class=\"el-icon-search\" :title=\"'菜单搜索'\"></i>\n    </div>\n    <!--布局配置-->\n    <div class=\"layout-navbars-breadcrumb-user-icon\" @click=\"onLayoutSetingClick\">\n      <i class=\"icon-skin iconfont\" :title=\"'布局配置'\"></i>\n    </div>\n    <!-- 全屏-->\n    <div class=\"layout-navbars-breadcrumb-user-icon mr10\" @click=\"onScreenfullClick\">\n      <i\n          class=\"iconfont\"\n          :title=\"isScreenfull ? '关全屏' : '开全屏'\"\n          :class=\"!isScreenfull ? 'icon-fullscreen' : 'icon-tuichuquanping'\"\n      ></i>\n    </div>\n    <!-- 个人中心-->\n    <el-dropdown :show-timeout=\"70\" :hide-timeout=\"50\" @command=\"onDropdownCommand\">\n\t\t\t<span class=\"layout-navbars-breadcrumb-user-link\">\n\t\t\t\t<img :src=\"getUserInfos.headSrc\" class=\"layout-navbars-breadcrumb-user-link-photo mr5\"/>\n\t\t\t\t{{ getUserInfos.userName === '' ? 'test' : getUserInfos.userName }}\n\t\t\t\t<i class=\"el-icon-arrow-down el-icon--right\"></i>\n\t\t\t</span>\n      <el-dropdown-menu slot=\"dropdown\">\n        <el-dropdown-item command=\"/home\">首页</el-dropdown-item>\n        <el-dropdown-item command=\"/personal\">个人中心</el-dropdown-item>\n        <!--        <el-dropdown-item command=\"/404\">404</el-dropdown-item>-->\n        <!--        <el-dropdown-item command=\"/401\">401</el-dropdown-item>-->\n        <el-dropdown-item divided command=\"logOut\">退出登录</el-dropdown-item>\n      </el-dropdown-menu>\n    </el-dropdown>\n    <Search ref=\"searchRef\"/>\n  </div>\n</template>\n\n<script>\nimport screenfull from 'screenfull';\nimport {Session, Local} from '@/utils/storage.js';\nimport Search from '@/layout/navBars/topBar/search.vue';\nimport {signOut} from \"../../../api/login\";\n\nexport default {\n  name: 'layoutBreadcrumbUser',\n  components: {Search},\n  data() {\n    return {\n      isScreenfull: false,\n      disabledI18n: 'zh-cn',\n      disabledSize: '',\n    };\n  },\n  computed: {\n    // 获取用户信息\n    getUserInfos() {\n      return this.$store.state.userInfos.userInfos.user;\n    },\n    // 设置弹性盒子布局 flex\n    layoutUserFlexNum() {\n      let {layout, isClassicSplitMenu} = this.$store.state.themeConfig.themeConfig;\n      let num = '';\n      if (layout === 'defaults' || (layout === 'classic' && !isClassicSplitMenu) || layout === 'columns') num = 1;\n      else num = null;\n      return num;\n    },\n  },\n  mounted() {\n    if (Local.get('themeConfigPrev')) {\n      this.initComponentSize();\n    }\n  },\n  methods: {\n    // 搜索点击\n    onSearchClick() {\n      this.$refs.searchRef.openSearch();\n    },\n    // 布局配置点击\n    onLayoutSetingClick() {\n      this.bus.$emit('openSetingsDrawer');\n    },\n    // 全屏点击\n    onScreenfullClick() {\n      if (!screenfull.isEnabled) {\n        this.$message.warning('暂不不支持全屏');\n        return false;\n      }\n      screenfull.toggle();\n      screenfull.on('change', () => {\n        if (screenfull.isFullscreen) this.isScreenfull = true;\n        else this.isScreenfull = false;\n      });\n      // 监听菜单 horizontal.vue 滚动条高度更新\n      this.bus.$emit('updateElScrollBar');\n    },\n    // 组件大小改变\n    onComponentSizeChange(size) {\n      Local.remove('themeConfigPrev');\n      this.$store.state.themeConfig.themeConfig.globalComponentSize = size;\n      Local.set('themeConfigPrev', this.$store.state.themeConfig.themeConfig);\n      this.$ELEMENT.size = size;\n      this.initComponentSize();\n      window.location.reload();\n    },\n    // 初始化全局组件大小\n    initComponentSize() {\n      switch (Local.get('themeConfigPrev').globalComponentSize) {\n        case '':\n          this.disabledSize = '';\n          break;\n        case 'medium':\n          this.disabledSize = 'medium';\n          break;\n        case 'small':\n          this.disabledSize = 'small';\n          break;\n        case 'mini':\n          this.disabledSize = 'mini';\n          break;\n      }\n    },\n    // `dropdown 下拉菜单` 当前项点击\n    onDropdownCommand(path) {\n      if (path === 'logOut') {\n        setTimeout(() => {\n          this.$msgbox({\n            closeOnClickModal: false,\n            closeOnPressEscape: false,\n            title: '提示',\n            message: '此操作将退出登录, 是否继续?',\n            showCancelButton: true,\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            beforeClose: (action, instance, done) => {\n              if (action === 'confirm') {\n                signOut().then(res => {\n                  instance.confirmButtonLoading = true;\n                  instance.confirmButtonText = '退出中';\n                  setTimeout(() => {\n                    done();\n                    setTimeout(() => {\n                      instance.confirmButtonLoading = false;\n                    }, 300);\n                  }, 700);\n                })\n              } else {\n                done();\n              }\n            },\n          })\n              .then(() => {\n                // 清除缓存/token等\n                Session.clear();\n                // 使用 reload 时，不需要调用 resetRoute() 重置路由\n                window.location.reload();\n              })\n              .catch(() => {\n              });\n        }, 150);\n      } else {\n        this.$router.push(path);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.layout-navbars-breadcrumb-user {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n\n  &-link {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n\n    &-photo {\n      width: 25px;\n      height: 25px;\n      border-radius: 100%;\n    }\n  }\n\n  &-icon {\n    padding: 0 10px;\n    cursor: pointer;\n    color: var(--prev-bg-topBarColor);\n    height: 50px;\n    line-height: 50px;\n    display: flex;\n    align-items: center;\n\n    &:hover {\n      background: var(--prev-color-hover);\n\n      i {\n        display: inline-block;\n        animation: logoAnimation 0.3s ease-in-out;\n      }\n    }\n  }\n\n  & ::v-deep .el-dropdown {\n    color: var(--prev-bg-topBarColor);\n  }\n\n  & ::v-deep .el-badge {\n    height: 40px;\n    line-height: 40px;\n    display: flex;\n    align-items: center;\n  }\n\n  & ::v-deep .el-badge__content.is-fixed {\n    top: 12px;\n  }\n}\n</style>\n"]}]}