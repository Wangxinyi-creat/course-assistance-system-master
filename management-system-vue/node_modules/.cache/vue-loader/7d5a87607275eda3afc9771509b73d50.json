{"remainingRequest":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\system\\user\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\system\\user\\index.vue","mtime":1713709431000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7TWVzc2FnZSwgTWVzc2FnZUJveH0gZnJvbSAiZWxlbWVudC11aSI7CmltcG9ydCB7Y2hhbmdlU3RhdHVzLCBkZWxldGVVc2VyLCBnZXRVc2VyfSBmcm9tICJAL2FwaS9zeXN0ZW0vdXNlciI7CmltcG9ydCB7Z2V0Um9sZVRvVXNlcn0gZnJvbSAiQC9hcGkvc3lzdGVtL3JvbGUiOwppbXBvcnQge2dldERlcHRMaXN0fSBmcm9tICJAL2FwaS9zeXN0ZW0vZGVwdCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3Bvd2VyVXNlcicsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogewogICAgICAgIGRhdGE6IFtdLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgIHBhcmFtOiB7CiAgICAgICAgICB1c2VyTmFtZTogJycsCiAgICAgICAgICBkZXB0SWQ6ICcnLAogICAgICAgICAgaWRlbnRpdHk6ICcnLAogICAgICAgICAgcGFnZU51bTogMSwKICAgICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlcHRMaXN0OiBbXSwKICAgICAgcm9sZXM6IFtdCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgVXNlckRpYWxvZzogKCkgPT4gaW1wb3J0KCdAL3ZpZXdzL3N5c3RlbS91c2VyL2RpYWxvZy52dWUnKSwKICAgIGRpY3RTZWxlY3Q6ICgpID0+IGltcG9ydCgiQC9jb21wb25lbnQvZGljdFNlbGVjdC9pbmRleC52dWUiKSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgdGhpcy5nZXRSb2xlQW5kRGVwdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiDojrflj5boj5zljZUKICAgICAqLwogICAgZ2V0VGFibGVEYXRhKCkgewogICAgICB0aGlzLnRhYmxlRGF0YS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0VXNlcih0aGlzLnRhYmxlRGF0YS5wYXJhbSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudGFibGVEYXRhLmRhdGEgPSByZXMuZGF0YS5saXN0OwogICAgICAgIHRoaXMudGFibGVEYXRhLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSwgNTAwKTsKICAgICAgfSkKICAgIH0sCiAgICAvKioKICAgICAqIOiOt+WPluinkuiJsuWIl+ihqC/pg6jpl6jliJfooagKICAgICAqLwogICAgZ2V0Um9sZUFuZERlcHQoKSB7CiAgICAgIGdldFJvbGVUb1VzZXIoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5yb2xlcyA9IHJlcy5kYXRhCiAgICAgIH0pCiAgICAgIGdldERlcHRMaXN0KCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZGVwdExpc3QgPSByZXMuZGF0YQogICAgICB9KQogICAgfSwKICAgIC8qKgogICAgICog5p+l6K+iCiAgICAgKi8KICAgIHNlYXJjaCgpIHsKICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgIH0sCiAgICAvKioKICAgICAqIOa3u+WKoOeUqOaItwogICAgICogQHBhcmFtIGZsYWcKICAgICAqLwogICAgb25PcGVuQWRkVXNlcihmbGFnKSB7CiAgICAgIGNvbnN0IGZvcm0gPSB7CiAgICAgICAgdXNlck5hbWU6ICcnLCAvLyDotKbmiLflkI3np7AKICAgICAgICBuaWNrTmFtZTogJycsIC8vIOeUqOaIt+aYteensAogICAgICAgIHBhc3N3b3JkOiAnJywgLy8g5a+G56CBCiAgICAgICAgcm9sZVNpZ246ICcnLC8v5YWz6IGU6KeS6ImyCiAgICAgICAgcGhvbmU6ICcnLCAvLyDmiYvmnLrlj7cKICAgICAgICBlbWFpbDogJycsIC8vIOmCrueusQogICAgICAgIHNleDogJycsIC8vIOaAp+WIqwogICAgICAgIGhlYWRTcmM6ICcnLCAvLyDlpLTlg48KICAgICAgICBpZGVudGl0eTogJycsIC8vIOi6q+S7vQogICAgICAgIG1ham9yOiAnJywgLy8g5LiT5LiaCiAgICAgICAgY2xhc3NOYW1lOiAnJywgLy8g54+t57qnCiAgICAgICAgc3RhdHVzOiB0cnVlLCAvLyDnlKjmiLfnirbmgIEKICAgICAgfQogICAgICB0aGlzLiRyZWZzLnVzZXJEaWFsb2dSZWYuZGVwdExpc3QgPSB0aGlzLmRlcHRMaXN0CiAgICAgIHRoaXMuJHJlZnMudXNlckRpYWxvZ1JlZi5vcGVuRGlhbG9nKGZsYWcsIGZvcm0sIHRoaXMucm9sZXMpCiAgICB9LAogICAgLyoqCiAgICAgKiDnvJbovpHnlKjmiLcKICAgICAqIEBwYXJhbSBmbGFnCiAgICAgKiBAcGFyYW0gcm93CiAgICAgKi8KICAgIG9uT3BlbkVkaXRVc2VyKGZsYWcsIHJvdykgewogICAgICB0aGlzLiRyZWZzLnVzZXJEaWFsb2dSZWYuZGVwdExpc3QgPSB0aGlzLmRlcHRMaXN0CiAgICAgIHRoaXMuJHJlZnMudXNlckRpYWxvZ1JlZi5vcGVuRGlhbG9nKGZsYWcsIHJvdywgdGhpcy5yb2xlcykKICAgIH0sCiAgICAvKioKICAgICAqIOWIoOmZpOeUqOaItwogICAgICogQHBhcmFtIHJvdwogICAgICovCiAgICBvblJvd0RlbChyb3cpIHsKICAgICAgLy/mj5DnpLoKICAgICAgTWVzc2FnZUJveC5jb25maXJtKGDmraTmk43kvZzlsIbmsLjkuYXliKDpmaTotKbmiLflkI3np7DvvJrigJwke3Jvdy51c2VyTmFtZX3igJ3vvIzmmK/lkKbnu6fnu60/YCwgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruiupCcsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAvL+iwg+eUqOWIoOmZpOaWueazlQogICAgICAgIGRlbGV0ZVVzZXIocm93LmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgICAgICAgTWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKICAgICAgICB9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog55So5oi36LSm5Y+35L+u5pS55Zue6LCDCiAgICAgKi8KICAgIGNoYW5nZVN0YXR1cyhyb3cpIHsKICAgICAgY2hhbmdlU3RhdHVzKHJvdy5pZCwgcm93LnN0YXR1cykudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICBNZXNzYWdlLnN1Y2Nlc3MocmVzLm1lc3NhZ2UpOwogICAgICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICAvKioKICAgICAqIOS/ruaUueavj+mhteaJgOWtmOaVsOaNrumHj+eahOWAvOaJgOinpuWPkeeahOWHveaVsAogICAgICogQHBhcmFtIHZhbAogICAgICovCiAgICBvbkhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIC8vIOS/ruaUuemhteeahOWkp+WwjwogICAgICB0aGlzLnRhYmxlRGF0YS5wYXJhbS5wYWdlU2l6ZSA9IHZhbDsKICAgICAgLy8g5oyJ5paw55qEcGFnZU5v5ZKMcGFnZVNpemXov5vooYzmn6Xor6IKICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgIH0sCiAgICAvKioKICAgICAqIOS/ruaUueW9k+WJjemhteaJgOinpuWPkeeahOWHveaVsAogICAgICogQHBhcmFtIHZhbAogICAgICovCiAgICBvbkhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIC8vIOabtOaWsOW9k+WJjeeahOmhtQogICAgICB0aGlzLnRhYmxlRGF0YS5wYXJhbS5wYWdlTnVtID0gdmFsOwogICAgICAvLyDmjInmlrDnmoRwYWdlTm/lkoxwYWdlU2l6Zei/m+ihjOafpeivogogICAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/user","sourcesContent":["<template>\n  <div class=\"system-user-container layout-padding\">\n    <el-card shadow=\"hover\" class=\"layout-padding-auto\">\n      <div class=\"system-user-search mb15\">\n        <el-form :model=\"tableData.param\" ref=\"queryForm\" size=\"small\" :inline=\"true\">\n          <el-form-item prop=\"userName\">\n            <el-input size=\"medium\" v-model=\"tableData.param.userName\" placeholder=\"请输入账号名称\"\n                      style=\"max-width: 180px\"></el-input>\n          </el-form-item>\n          <el-form-item prop=\"userName\">\n            <el-cascader :props=\"{value:'id', label: 'deptName', children: 'children',emitPath: false}\"\n                         :options=\"deptList\"\n                         v-model=\"tableData.param.deptId\"\n                         style=\"max-width: 180px\"\n                         props.expandTrigger=\"hover\"\n                         clearable\n                         size=\"medium\"\n                         placeholder=\"请选择所属学院\">\n            </el-cascader>\n          </el-form-item>\n          <el-form-item>\n            <dictSelect v-model=\"tableData.param.identity\" dictType=\"Identity\" placeholder=\"请选择身份\" size=\"medium\"></dictSelect>\n          </el-form-item>\n          <el-form-item>\n            <el-button size=\"medium\" type=\"primary\" class=\"ml10\" icon=\"el-icon-search\" @click=\"search()\">\n              查询\n            </el-button>\n            <el-button size=\"medium\" type=\"success\" class=\"ml10\" v-hasPermi=\"['system:user:add']\" icon=\"el-icon-plus\"\n                       @click=\"onOpenAddUser('add')\">\n              新增用户\n            </el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n\n      <el-table :data=\"tableData.data\" v-loading=\"tableData.loading\" style=\"width: 100%;min-height:calc(100vh - 320px)\">\n        <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"60\"/>\n        <el-table-column prop=\"userName\" label=\"账户名称\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"nickName\" label=\"用户昵称\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"sex\" label=\"性别\" align=\"center\" show-overflow-tooltip>\n          <template #default=\"scope\">\n            <span>{{ scope.row.sex == 1 ? '男' : '女' }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"phone\" label=\"手机号\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"email\" label=\"邮箱\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"deptName\" label=\"所属学院\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"identity\" label=\"身份\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"major\" label=\"专业\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"className\" label=\"班级\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"roleName\" label=\"关联角色\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"status\" label=\"用户状态\" align=\"center\" show-overflow-tooltip>\n          <template #default=\"scope\">\n            <el-switch\n              v-model=\"scope.row.status\"\n              active-color=\"#13ce66\"\n              inactive-color=\"#ff4949\"\n              v-hasPermi=\"['system:user:update']\"\n              @change=\"changeStatus(scope.row)\">\n            </el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"createBy\" label=\"创建人\" align=\"center\" show-overflow-tooltip></el-table-column>\n<!--        <el-table-column prop=\"createTime\" label=\"创建时间\" align=\"center\" show-overflow-tooltip></el-table-column>-->\n<!--        <el-table-column prop=\"updateBy\" label=\"修改人\" align=\"center\" show-overflow-tooltip></el-table-column>-->\n<!--        <el-table-column prop=\"updateTime\" label=\"修改时间\" align=\"center\" show-overflow-tooltip></el-table-column>-->\n        <el-table-column label=\"操作\" align=\"center\" width=\"150px\">\n          <template #default=\"scope\">\n            <el-button size=\"small\"\n                       type=\"text\"\n                       v-hasPermi=\"['system:user:update']\"\n                       icon=\"el-icon-edit\"\n                       @click=\"onOpenEditUser('edit', scope.row)\"\n            >修改\n            </el-button>\n            <el-button size=\"small\"\n                       type=\"text\"\n                       icon=\"el-icon-delete\"\n                       v-hasPermi=\"['system:user:delete']\"\n                       @click=\"onRowDel(scope.row)\">删除\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-pagination\n        @size-change=\"onHandleSizeChange\"\n        @current-change=\"onHandleCurrentChange\"\n        class=\"mt15\"\n        :pager-count=\"5\"\n        :page-sizes=\"[10, 20, 30]\"\n        v-model:current-page=\"tableData.param.pageNum\"\n        background\n        v-model:page-size=\"tableData.param.pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"tableData.total\"\n      >\n      </el-pagination>\n    </el-card>\n    <UserDialog ref=\"userDialogRef\" @refresh=\"getTableData()\"/>\n  </div>\n</template>\n\n<script>\nimport {Message, MessageBox} from \"element-ui\";\nimport {changeStatus, deleteUser, getUser} from \"@/api/system/user\";\nimport {getRoleToUser} from \"@/api/system/role\";\nimport {getDeptList} from \"@/api/system/dept\";\n\nexport default {\n  name: 'powerUser',\n  data() {\n    return {\n      tableData: {\n        data: [],\n        total: 0,\n        loading: false,\n        param: {\n          userName: '',\n          deptId: '',\n          identity: '',\n          pageNum: 1,\n          pageSize: 10,\n        }\n      },\n      deptList: [],\n      roles: []\n    };\n  },\n  components: {\n    UserDialog: () => import('@/views/system/user/dialog.vue'),\n    dictSelect: () => import(\"@/component/dictSelect/index.vue\"),\n  },\n  mounted() {\n    this.getTableData();\n    this.getRoleAndDept();\n  },\n  methods: {\n    /**\n     * 获取菜单\n     */\n    getTableData() {\n      this.tableData.loading = true;\n      getUser(this.tableData.param).then(res => {\n        this.tableData.data = res.data.list;\n        this.tableData.total = res.data.total;\n        setTimeout(() => {\n          this.tableData.loading = false;\n        }, 500);\n      })\n    },\n    /**\n     * 获取角色列表/部门列表\n     */\n    getRoleAndDept() {\n      getRoleToUser().then(res => {\n        this.roles = res.data\n      })\n      getDeptList().then(res => {\n        this.deptList = res.data\n      })\n    },\n    /**\n     * 查询\n     */\n    search() {\n      this.getTableData();\n    },\n    /**\n     * 添加用户\n     * @param flag\n     */\n    onOpenAddUser(flag) {\n      const form = {\n        userName: '', // 账户名称\n        nickName: '', // 用户昵称\n        password: '', // 密码\n        roleSign: '',//关联角色\n        phone: '', // 手机号\n        email: '', // 邮箱\n        sex: '', // 性别\n        headSrc: '', // 头像\n        identity: '', // 身份\n        major: '', // 专业\n        className: '', // 班级\n        status: true, // 用户状态\n      }\n      this.$refs.userDialogRef.deptList = this.deptList\n      this.$refs.userDialogRef.openDialog(flag, form, this.roles)\n    },\n    /**\n     * 编辑用户\n     * @param flag\n     * @param row\n     */\n    onOpenEditUser(flag, row) {\n      this.$refs.userDialogRef.deptList = this.deptList\n      this.$refs.userDialogRef.openDialog(flag, row, this.roles)\n    },\n    /**\n     * 删除用户\n     * @param row\n     */\n    onRowDel(row) {\n      //提示\n      MessageBox.confirm(`此操作将永久删除账户名称：“${row.userName}”，是否继续?`, '提示', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(() => {\n        //调用删除方法\n        deleteUser(row.id).then(res => {\n          this.getTableData();\n          Message.success(\"删除成功\");\n        })\n      }).catch(() => {\n      });\n    },\n    /**\n     * 用户账号修改回调\n     */\n    changeStatus(row) {\n      changeStatus(row.id, row.status).then(res => {\n        if (res.code === 200) {\n          Message.success(res.message);\n          this.getTableData()\n        }\n      })\n    },\n    /**\n     * 修改每页所存数据量的值所触发的函数\n     * @param val\n     */\n    onHandleSizeChange(val) {\n      // 修改页的大小\n      this.tableData.param.pageSize = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n    /**\n     * 修改当前页所触发的函数\n     * @param val\n     */\n    onHandleCurrentChange(val) {\n      // 更新当前的页\n      this.tableData.param.pageNum = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n  }\n};\n</script>\n\n<style>\n.el-cascader-panel {\n  height: 200px;\n}\n</style>\n"]}]}