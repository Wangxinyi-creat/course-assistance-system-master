{"remainingRequest":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\front\\my\\index.vue?vue&type=style&index=1&id=cba6e422&scoped=true&lang=css&","dependencies":[{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\front\\my\\index.vue","mtime":1713709431000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCjo6di1kZWVwIC5lbC1jYXJkX19ib2R5IHsKICBwYWRkaW5nOiAwOwp9Cgo6OnYtZGVlcCAuZWwtY2FyZF9faGVhZGVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYmNjOWMwOwp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmWA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/front/my","sourcesContent":["<template>\n  <div class=\"container-main\">\n    <!--个人信息-->\n    <el-card style=\"border-radius: 12px;margin-top: 10px\">\n      <div style=\"padding: 20px\">\n        <el-descriptions title=\"用户信息\">\n          <el-descriptions-item label=\"用户账户\">{{ user.userName }}</el-descriptions-item>\n          <el-descriptions-item label=\"用户昵称\">{{ user.nickName }}</el-descriptions-item>\n          <el-descriptions-item label=\"性别\">{{ user.sex === 1 ? '男' : '女' }}</el-descriptions-item>\n          <el-descriptions-item label=\"联系电话\">{{ user.phone }}</el-descriptions-item>\n          <el-descriptions-item label=\"邮箱\">{{ user.email }}</el-descriptions-item>\n          <el-descriptions-item label=\"身份证号码\">{{ user.idCard }}</el-descriptions-item>\n        </el-descriptions>\n      </div>\n    </el-card>\n    <!--可扩展-->\n    <!--    <el-card class=\"card1\">-->\n    <!--      <div class=\"card1-block\" @click=\"goToMyView\">-->\n    <!--        <p class=\"p-style\">-->\n    <!--          <i class=\"el-icon-view\" style=\"font-size: 30px\"/>-->\n    <!--          <span style=\"display: block\">正在学习</span>-->\n    <!--        </p>-->\n    <!--      </div>-->\n    <!--      <div class=\"card1-block\" @click=\"goToMyCollect\">-->\n    <!--        <p class=\"p-style\">-->\n    <!--          <i class=\"el-icon-star-on\" style=\"font-size: 30px\"></i>-->\n    <!--          <span style=\"display: block\">已经完成</span>-->\n    <!--        </p>-->\n    <!--      </div>-->\n    <!--    </el-card>-->\n    <!--更多服务-->\n    <el-card class=\"card2\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>更多服务</span>\n      </div>\n      <div class=\"card2-content\">\n        <p style=\"margin:10px 0 10px 10px\" @click=\"edit1()\">\n          <i class=\"el-icon-edit\" style=\"margin-right: 6px\"/>修改信息\n        </p>\n        <p style=\"margin:20px 0 10px 10px\" @click=\"edit2()\">\n          <i class=\"el-icon-edit-outline\" style=\"margin-right: 6px\"/>修改密码\n        </p>\n      </div>\n    </el-card>\n    <div style=\"width: 200px;margin: 50px auto\">\n      <el-button round class=\"button-style\" style=\"width: 200px;height: 50px\" @click=\"logout\">退出登录</el-button>\n    </div>\n\n    <!--修改弹框-->\n    <el-dialog title=\"修改个人基本信息\"\n               :visible.sync=\"isShowDialog\"\n               :close-on-click-modal=\"false\"\n               width=\"769px\">\n      <el-form ref=\"DialogFormRef1\" :model=\"ruleForm\" :rules=\"rules\" size=\"default\" label-width=\"90px\">\n        <el-row :gutter=\"35\">\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-form-item label=\"账户名称\" prop=\"userName\">\n              <el-input v-model=\"ruleForm.userName\" placeholder=\"请输入账户名称\" clearable\n                        maxlength=\"20\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-form-item label=\"用户昵称\" prop=\"nickName\">\n              <el-input v-model=\"ruleForm.nickName\" placeholder=\"请输入用户昵称\" clearable\n                        maxlength=\"20\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-form-item label=\"性别\" prop=\"sex\">\n              <dictSelect v-model=\"ruleForm.sex\" dictType=\"sex\"\n                          placeholder=\"请选择性别\"></dictSelect>\n            </el-form-item>\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-form-item label=\"手机号\" prop=\"phone\">\n              <el-input v-model=\"ruleForm.phone\" placeholder=\"请输入手机号\" clearable\n                        maxlength=\"11\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-form-item label=\"邮箱\" prop=\"email\">\n              <el-input v-model=\"ruleForm.email\" placeholder=\"请输入\" clearable></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-form-item label=\"身份证号码\" prop=\"idCard\">\n              <el-input v-model=\"ruleForm.idCard\" placeholder=\"请输入\" clearable></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <template #footer>\n\t\t\t\t<span class=\"dialog-footer\">\n\t\t\t\t\t<el-button @click=\"onCancel\" size=\"default\">取 消</el-button>\n\t\t\t\t\t<el-button type=\"primary\" @click=\"onSubmit()\" size=\"default\">提交</el-button>\n\t\t\t\t</span>\n      </template>\n    </el-dialog>\n\n    <el-dialog title=\"修改密码\"\n               :visible.sync=\"isShowDialog2\"\n               :close-on-click-modal=\"false\"\n               width=\"769px\">\n      <el-form ref=\"DialogFormRef2\" :model=\"ruleForm2\" :rules=\"rules2\" size=\"default\" label-width=\"90px\">\n        <el-row :gutter=\"35\">\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-form-item label=\"旧密码\" prop=\"oldPassword\">\n              <el-input v-model=\"ruleForm2.oldPassword\"\n                        placeholder=\"请输入用户密码\"\n                        type=\"password\"\n                        maxlength=\"16\"\n                        clearable></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-form-item label=\"新密码\" prop=\"newPassword1\">\n              <el-input v-model=\"ruleForm2.newPassword1\"\n                        placeholder=\"请输入新密码\"\n                        type=\"password\"\n                        maxlength=\"16\"\n                        clearable></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" class=\"mb20\">\n            <el-form-item label=\"新密码\" prop=\"newPassword2\">\n              <el-input v-model=\"ruleForm2.newPassword2\"\n                        placeholder=\"请再输入新密码\"\n                        type=\"password\"\n                        maxlength=\"16\"\n                        clearable></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <template #footer>\n\t\t\t\t<span class=\"dialog-footer\">\n\t\t\t\t\t<el-button @click=\"onCancel\" size=\"default\">取 消</el-button>\n\t\t\t\t\t<el-button type=\"primary\" @click=\"onSubmit2()\" size=\"default\">提交</el-button>\n\t\t\t\t</span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n\n<script>\nimport {Session} from \"@/utils/storage\";\nimport {updatePersonal, updatePwd,} from \"@/api/system/user\";\nimport {signOut} from \"@/api/login\";\n\nexport default {\n  components: {\n    dictSelect: () => import(\"@/component/dictSelect/index.vue\")\n  },\n  name: 'my',\n  data() {\n    return {\n      circleUrl: \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\",\n      isShowDialog: false,\n      isShowDialog2: false,\n      ruleForm: {},\n      ruleForm2: {},\n      rules: {\n        userName: [{required: true, message: '请输入账号名称', trigger: 'blur'}],\n        password: [{required: true, message: '请输入密码', trigger: 'blur'}],\n        sex: [{required: true, message: '请选择性别', trigger: 'change'}],\n        phone: [{required: true, message: '请输入手机号', trigger: 'blur'}]\n      },\n      rules2: {\n        oldPassword: [{required: true, message: '请输入密码', trigger: 'blur'}],\n        newPassword1: [{required: true, message: '请输入密码', trigger: 'blur'}],\n        newPassword2: [{required: true, message: '请输入密码', trigger: 'blur'}]\n      },\n      user: {},\n      authBtnList: [],\n    };\n  },\n  created() {\n    if (!Session.get('userInfo')) {\n      this.$router.push('/login');\n      return\n    }\n    this.user = Session.get('userInfo').user;\n    this.authBtnList = Session.get('userInfo').authBtnList;\n  },\n  methods: {\n    goToMyView() {\n      this.$router.push(\"/front-my-view\")\n    },\n    goToMyCollect() {\n      this.$router.push(\"/front-my-collect\")\n    },\n    logout() {\n      setTimeout(() => {\n        this.$msgbox({\n          closeOnClickModal: false,\n          closeOnPressEscape: false,\n          title: '提示',\n          message: '此操作将退出登录, 是否继续?',\n          showCancelButton: true,\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          beforeClose: (action, instance, done) => {\n            if (action === 'confirm') {\n              signOut().then(res => {\n                instance.confirmButtonLoading = true;\n                instance.confirmButtonText = '退出中';\n                setTimeout(() => {\n                  done();\n                  setTimeout(() => {\n                    instance.confirmButtonLoading = false;\n                  }, 300);\n                }, 700);\n              })\n            } else {\n              done();\n            }\n          },\n        }).then(() => {\n          // 清除缓存/token等\n          Session.clear();\n          // 使用 reload 时，不需要调用 resetRoute() 重置路由\n          window.location.reload();\n        })\n            .catch(() => {\n            });\n      }, 150);\n      setTimeout(() => {\n        this.$router.push('/');\n      }, 2000)\n    },\n    edit1() {\n      this.isShowDialog = true\n      this.ruleForm = {...this.user}\n    },\n    edit2() {\n      this.isShowDialog2 = true\n      this.ruleForm = {...this.user}\n    },\n    /**\n     * 关闭弹框\n     */\n    onCancel() {\n      this.isShowDialog = false;\n      this.isShowDialog2 = false;\n      this.$refs.DialogFormRef1.resetFields()\n      this.$refs.DialogFormRef2.resetFields()\n    },\n    onSubmit() {\n      this.$refs[\"DialogFormRef1\"].validate(valid => {\n        if (valid) {\n          updatePersonal(this.ruleForm).then(res => {\n            if (res.code === 200) {\n              //更新vuex数据\n              this.loadVueX()\n              this.$notify.success({\n                title: '提示',\n                message: '修改成功'\n              });\n              this.onCancel();\n            }\n          })\n        }\n      })\n    },\n    /**\n     * 更新vuex数据\n     */\n    loadVueX() {\n      const userInfos = {\n        user: this.ruleForm,\n        time: new Date().getTime(),\n        authBtnList: this.authBtnList,\n      };\n      this.$store.dispatch('userInfos/setUserInfos', userInfos);\n      this.user = this.ruleForm;\n      Session.set('userInfo', userInfos);\n    },\n    onSubmit2() {\n      this.$refs[\"DialogFormRef2\"].validate(valid => {\n        if (valid) {\n          updatePwd(this.getUserInfos.id, this.ruleForm2).then(res => {\n            if (res.code === 200) {\n              this.$notify.success({\n                title: '提示',\n                message: '修改成功'\n              });\n              this.dialogVisible = false\n            }\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container-main {\n  border-radius: 6px;\n  max-width: 1200px;\n  margin: auto;\n  width: 100%;\n  min-height: 100%;\n}\n\n.card1 {\n  height: 80px;\n  border-radius: 12px;\n  margin-top: 20px;\n}\n\n.card1-block {\n  cursor: pointer;\n  width: 50%;\n  height: 80px;\n  display: inline-block;\n\np {\n  text-align: center;\n  font-size: 15px;\n}\n\n.p-style {\n  padding: 15px\n}\n\n}\n\n.card1-block:hover {\n  background-color: #2EB976;\n}\n\n.card2 {\n  height: 180px;\n  border-radius: 12px;\n  margin-top: 20px;\n\n.card2-content {\n  padding: 20px;\n\np {\n  cursor: pointer;\n  font-size: 16px;\n}\n\np:hover {\n  color: #409eff;\n}\n\n}\n}\n</style>\n\n<style scoped>\n::v-deep .el-card__body {\n  padding: 0;\n}\n\n::v-deep .el-card__header {\n  background-color: #bcc9c0;\n}\n</style>\n"]}]}