{"remainingRequest":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\scas\\student\\experiment\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\src\\views\\scas\\student\\experiment\\index.vue","mtime":1715876563984},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-project\\course-assistance-system-master\\management-system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0RXhwZXJpbWVudH0gZnJvbSAiQC9hcGkvc2Nhcy9leHBlcmltZW50IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZXhwZXJpbWVudCcsCiAgcHJvcHM6IHsKICAgIGNvdXJzZUlkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogJycKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZURhdGE6IHsKICAgICAgICBkYXRhOiBbXSwKICAgICAgICB0b3RhbDogMCwKICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICBwYXJhbTogewogICAgICAgICAgY291cnNlSWQ6ICcnLAogICAgICAgICAgdXNlck5hbWU6ICcnLAogICAgICAgICAgcGFnZU51bTogMSwKICAgICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICB9LAogICAgICB9CiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgZXhwZXJpbWVudERpYWxvZzogKCkgPT4gaW1wb3J0KCcuL2RpYWxvZy52dWUnKSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnRhYmxlRGF0YS5wYXJhbS5jb3Vyc2VJZCA9IHRoaXMuY291cnNlSWQKICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBwcmV2aWV3UGRmKHVybCkgewogICAgICBjb25zb2xlLmxvZyh1cmwpCiAgICAgIHdpbmRvdy5vcGVuKGBzdGF0aWMvd2ViL3ZpZXdlci5odG1sP2ZpbGU9JHtlbmNvZGVVUklDb21wb25lbnQodXJsKX1gKQogICAgICAvLyB3aW5kb3cub3Blbihgc3RhdGljL3BkZi93ZWIvdmlld2VyLmh0bWw/ZmlsZT0ke3VybH1gKQogICAgfSwKICAgIC8qKgogICAgICog6I635Y+W6I+c5Y2VCiAgICAgKi8KICAgIGdldFRhYmxlRGF0YSgpIHsKICAgICAgdGhpcy50YWJsZURhdGEubG9hZGluZyA9IHRydWU7CiAgICAgIGdldEV4cGVyaW1lbnQodGhpcy50YWJsZURhdGEucGFyYW0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnRhYmxlRGF0YS5kYXRhID0gcmVzLmRhdGEubGlzdDsKICAgICAgICB0aGlzLnRhYmxlRGF0YS50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy50YWJsZURhdGEubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0sIDUwMCk7CiAgICAgIH0pCiAgICB9LAogICAgLyoqCiAgICAgKiDmt7vliqDmiJbkv67mlLnlvLnmoYYKICAgICAqIEBwYXJhbSBmbGFnCiAgICAgKiBAcGFyYW0gcm93CiAgICAgKi8KICAgIG9wZW5BZGRPclVwZGF0ZShmbGFnLCByb3cpIHsKICAgICAgdGhpcy4kcmVmcy5leHBlcmltZW50RGlhbG9nUmVmLm9wZW5EaWFsb2coZmxhZywgcm93KQogICAgfSwKICAgIC8qKgogICAgICog5L+u5pS55q+P6aG15omA5a2Y5pWw5o2u6YeP55qE5YC85omA6Kem5Y+R55qE5Ye95pWwCiAgICAgKiBAcGFyYW0gdmFsCiAgICAgKi8KICAgIG9uSGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgLy8g5L+u5pS56aG155qE5aSn5bCPCiAgICAgIHRoaXMudGFibGVEYXRhLnBhcmFtLnBhZ2VTaXplID0gdmFsOwogICAgICAvLyDmjInmlrDnmoRwYWdlTm/lkoxwYWdlU2l6Zei/m+ihjOafpeivogogICAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgfSwKICAgIC8qKgogICAgICog5L+u5pS55b2T5YmN6aG15omA6Kem5Y+R55qE5Ye95pWwCiAgICAgKiBAcGFyYW0gdmFsCiAgICAgKi8KICAgIG9uSGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgLy8g5pu05paw5b2T5YmN55qE6aG1CiAgICAgIHRoaXMudGFibGVEYXRhLnBhcmFtLnBhZ2VOdW0gPSB2YWw7CiAgICAgIC8vIOaMieaWsOeahHBhZ2VOb+WSjHBhZ2VTaXpl6L+b6KGM5p+l6K+iCiAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICB9LAogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/scas/student/experiment","sourcesContent":["<template>\n  <div class=\"system-user-container layout-padding\">\n    <el-card shadow=\"hover\" class=\"layout-padding-auto\">\n      <el-table :data=\"tableData.data\" v-loading=\"tableData.loading\" style=\"width: 100%;min-height:calc(100vh - 320px)\">\n<!--        <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"60\"/>-->\n<!--        <el-table-column prop=\"courseName\" label=\"课程\" align=\"center\" show-overflow-tooltip></el-table-column>-->\n<!--        <el-table-column prop=\"userName\" label=\"学号\" align=\"center\" show-overflow-tooltip></el-table-column>-->\n        <el-table-column prop=\"jobNumber\" label=\"作业号\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"experimentTitle\" label=\"作业标题\" align=\"center\"\n                         show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"experimentDescription\" label=\"作业描述\" align=\"center\"\n                         show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"answer\" label=\"总结\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"myCode\" label=\"实验代码\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"result\" label=\"代码运行结果\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"uploadUrl\" label=\"作业附件\" align=\"center\" show-overflow-tooltip>\n          <template #default=\"scope\">\n<!--            <a :href=\"scope.row.uploadUrl\" target=\"_blank\" v-if=\"scope.row.uploadUrl\">查看附件</a>-->\n            <button @click=\"previewPdf(scope.row.uploadUrl)\" v-if=\"scope.row.uploadUrl\">查看附件</button>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"deadline\" label=\"截止日期\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"uploadDate\" label=\"上传日期\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"grade\" label=\"成绩\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"review\" label=\"评阅意见\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column label=\"操作\" align=\"center\" width=\"180px\">\n          <template #default=\"scope\">\n            <el-button size=\"small\"\n                       type=\"text\"\n                       icon=\"el-icon-success\"\n                       v-if=\"!scope.row.grade\"\n                       @click=\"openAddOrUpdate('edit', scope.row)\"\n            >提交\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-pagination\n          @size-change=\"onHandleSizeChange\"\n          @current-change=\"onHandleCurrentChange\"\n          class=\"mt15\"\n          :pager-count=\"5\"\n          :page-sizes=\"[10, 20, 30]\"\n          v-model:current-page=\"tableData.param.pageNum\"\n          background\n          v-model:page-size=\"tableData.param.pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"tableData.total\"\n      >\n      </el-pagination>\n    </el-card>\n\n    <experimentDialog ref=\"experimentDialogRef\" @refresh=\"getTableData()\"/>\n  </div>\n</template>\n\n<script>\nimport {getExperiment} from \"@/api/scas/experiment\";\n\nexport default {\n  name: 'experiment',\n  props: {\n    courseId: {\n      type: Number,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      tableData: {\n        data: [],\n        total: 0,\n        loading: false,\n        param: {\n          courseId: '',\n          userName: '',\n          pageNum: 1,\n          pageSize: 10,\n        },\n      }\n    };\n  },\n  components: {\n    experimentDialog: () => import('./dialog.vue'),\n  },\n  mounted() {\n    this.tableData.param.courseId = this.courseId\n    this.getTableData();\n  },\n  methods: {\n    previewPdf(url) {\n      console.log(url)\n      window.open(`static/web/viewer.html?file=${encodeURIComponent(url)}`)\n      // window.open(`static/pdf/web/viewer.html?file=${url}`)\n    },\n    /**\n     * 获取菜单\n     */\n    getTableData() {\n      this.tableData.loading = true;\n      getExperiment(this.tableData.param).then(res => {\n        this.tableData.data = res.data.list;\n        this.tableData.total = res.data.total;\n        setTimeout(() => {\n          this.tableData.loading = false;\n        }, 500);\n      })\n    },\n    /**\n     * 添加或修改弹框\n     * @param flag\n     * @param row\n     */\n    openAddOrUpdate(flag, row) {\n      this.$refs.experimentDialogRef.openDialog(flag, row)\n    },\n    /**\n     * 修改每页所存数据量的值所触发的函数\n     * @param val\n     */\n    onHandleSizeChange(val) {\n      // 修改页的大小\n      this.tableData.param.pageSize = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n    /**\n     * 修改当前页所触发的函数\n     * @param val\n     */\n    onHandleCurrentChange(val) {\n      // 更新当前的页\n      this.tableData.param.pageNum = val;\n      // 按新的pageNo和pageSize进行查询\n      this.getTableData();\n    },\n  }\n};\n</script>\n\n<style>\n.el-tooltip__popper {\n  max-width: 50%\n}\n</style>\n"]}]}